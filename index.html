<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢ | Inventory & Sales Management</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- DataTables CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.6/css/dataTables.tailwindcss.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Animate.css for animations -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <!-- Chart.js for Charts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- DataTables JS -->
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/dataTables.tailwindcss.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.print.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    
    <style>
        /* ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á Scrollbar ‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡∏°‡∏∑‡∏î */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #1f2937;
        }
        ::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 5px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #6b7280;
        }
        
        /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£ hover ‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á */
        .hover-effect:hover {
            transform: translateY(-2px);
            transition: all 0.2s ease;
        }
        
        /* ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏õ‡∏∏‡πà‡∏° */
        .btn-glow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.5);
        }
        .btn-glow:hover {
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.7);
        }
        
        /* Animation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }
        
        /* Badge ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå */
        .role-badge {
            font-size: 0.7rem;
            padding: 0.2rem 0.5rem;
            border-radius: 9999px;
            font-weight: bold;
            text-transform: uppercase;
        }
        
        .role-admin {
            background-color: #7c3aed;
            color: white;
        }
        
        .role-user {
            background-color: #059669;
            color: white;
        }
        
        .role-manager {
            background-color: #d97706;
            color: white;
        }
        
        /* Floating animation */
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        /* Page transition */
        .page-transition {
            transition: opacity 0.3s ease;
        }
        
        /* Hidden class */
        .hidden {
            display: none !important;
        }
        
        /* Custom Alert Styles */
        .alert-container {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 9999;
            max-width: 400px;
            width: 100%;
        }
        
        .alert {
            display: flex;
            align-items: center;
            padding: 1rem 1.25rem;
            border-radius: 0.75rem;
            margin-bottom: 1rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.5);
            transform: translateX(120%);
            transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border-left-width: 4px;
        }
        
        .alert.show {
            transform: translateX(0);
        }
        
        .alert-success {
            background: linear-gradient(135deg, #064e3b 0%, #065f46 100%);
            border-left-color: #10b981;
            color: #d1fae5;
        }
        
        .alert-error {
            background: linear-gradient(135deg, #7f1d1d 0%, #991b1b 100%);
            border-left-color: #ef4444;
            color: #fecaca;
        }
        
        .alert-warning {
            background: linear-gradient(135deg, #78350f 0%, #92400e 100%);
            border-left-color: #f59e0b;
            color: #fef3c7;
        }
        
        .alert-info {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            border-left-color: #3b82f6;
            color: #dbeafe;
        }
        
        .alert-icon {
            font-size: 1.5rem;
            margin-right: 0.75rem;
            flex-shrink: 0;
        }
        
        .alert-content {
            flex-grow: 1;
        }
        
        .alert-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 0.25rem;
        }
        
        .alert-message {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        .alert-close {
            background: transparent;
            border: none;
            color: inherit;
            font-size: 1.25rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s;
            margin-left: 0.5rem;
            flex-shrink: 0;
        }
        
        .alert-close:hover {
            opacity: 1;
        }
        
        /* Pulse animation for notification */
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 0.75rem;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            z-index: 9998;
            max-width: 350px;
            border-left: 4px solid #3b82f6;
        }
        
        .toast.show {
            transform: translateY(0);
            opacity: 1;
        }
        
        /* Confirmation Dialog Styles */
        .confirmation-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            border-radius: 1rem;
            padding: 0;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.75);
            z-index: 10000;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            max-width: 450px;
            width: 90%;
            overflow: hidden;
        }
        
        .confirmation-dialog.show {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }
        
        .confirmation-header {
            padding: 1.5rem;
            border-bottom: 1px solid #374151;
            text-align: center;
        }
        
        .confirmation-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }
        
        .confirmation-body {
            padding: 1.5rem;
            text-align: center;
        }
        
        .confirmation-footer {
            padding: 1.5rem;
            border-top: 1px solid #374151;
            display: flex;
            gap: 0.75rem;
            justify-content: center;
        }
        
        /* Product Card Hover Effect */
        .product-card {
            transition: all 0.3s ease;
        }
        
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
        }
        
        /* Shimmer Effect */
        .shimmer {
            background: linear-gradient(90deg, 
                rgba(255,255,255,0) 0%, 
                rgba(255,255,255,0.1) 50%, 
                rgba(255,255,255,0) 100%);
            background-size: 200% 100%;
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }
        
        /* Navigation Styles */
        .nav-link {
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .nav-link:hover {
            background-color: #374151;
        }
        
        .nav-link.active {
            background-color: #4f46e5;
            color: white;
        }
        
        /* Tab Styles */
        .tab {
            padding: 0.75rem 1.5rem;
            border-bottom: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .tab:hover {
            background-color: #374151;
        }
        
        .tab.active {
            border-bottom-color: #4f46e5;
            color: #4f46e5;
            font-weight: 600;
        }
        
        /* Permission Badge */
        .permission-badge {
            font-size: 0.65rem;
            padding: 0.15rem 0.4rem;
            border-radius: 0.25rem;
            margin: 0.1rem;
            display: inline-block;
        }
        
        .permission-allowed {
            background-color: #10b981;
            color: white;
        }
        
        .permission-denied {
            background-color: #ef4444;
            color: white;
        }
        
        .permission-partial {
            background-color: #f59e0b;
            color: white;
        }
        
        /* Print Styles */
        @media print {
            body * {
                visibility: hidden;
            }
            
            .print-section, .print-section * {
                visibility: visible;
            }
            
            .print-section {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                background: white;
                color: black;
                padding: 20px;
            }
            
            .no-print {
                display: none !important;
            }
        }
        
        /* Cart Item Styles */
        .cart-item {
            transition: all 0.2s ease;
        }
        
        .cart-item:hover {
            background-color: #374151;
        }
        
        /* Sales Receipt Styles */
        .receipt {
            font-family: 'Courier New', monospace;
        }
        
        .receipt-line {
            border-bottom: 1px dashed #4b5563;
            margin: 5px 0;
        }
        
        /* Custom scrollbar for cart */
        .cart-scroll {
            max-height: 400px;
            overflow-y: auto;
        }
        
        .cart-scroll::-webkit-scrollbar {
            width: 6px;
        }
        
        .cart-scroll::-webkit-scrollbar-track {
            background: #1f2937;
        }
        
        .cart-scroll::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 3px;
        }
        
        /* Highlight effect for stock changes */
        .stock-change {
            animation: highlight 1s ease;
        }
        
        @keyframes highlight {
            0% { background-color: rgba(59, 130, 246, 0.5); }
            100% { background-color: transparent; }
        }
        
        /* Sales statistics card */
        .stat-card {
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: scale(1.02);
        }
        
        /* QR Code Styles */
        .qrcode-container {
            padding: 20px;
            background: white;
            border-radius: 10px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .countdown-timer {
            font-size: 2rem;
            font-weight: bold;
            color: #ef4444;
            margin: 15px 0;
            animation: pulse 1.5s infinite;
        }
        
        /* Payment Methods */
        .payment-method-option {
            border: 2px solid #374151;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .payment-method-option:hover {
            border-color: #4f46e5;
            background-color: #1f2937;
        }
        
        .payment-method-option.selected {
            border-color: #10b981;
            background-color: #064e3b20;
        }
        
        /* Notification Badge */
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: #ef4444;
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Protection Styles */
        .protection-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 999999;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            text-align: center;
        }
        
        /* Protection Warning */
        .protection-warning {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #000000, #1a0000);
            z-index: 9999999;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
        }
        
        .protection-content {
            background: linear-gradient(135deg, #dc2626, #991b1b);
            padding: 40px;
            border-radius: 20px;
            max-width: 500px;
            margin: 20px;
            box-shadow: 0 0 50px rgba(220, 38, 38, 0.5);
        }
    </style>
    
    <!-- Protection Script (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£ inspect ‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏ó‡∏±‡∏ô‡∏ó‡∏µ) -->
    <script>
        // ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î Developer Tools ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏Ç‡πâ‡∏°‡∏á‡∏ß‡∏î
        (function() {
            'use strict';
            
            // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö Developer Tools
            let devToolsOpened = false;
            let detectionInterval = null;
            let protectionActive = false;
            
            // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Developer Tools
            function detectDevTools() {
                if (protectionActive) return;
                
                const threshold = 160;
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏ï‡∏Å‡∏ï‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á
                const widthThreshold = window.outerWidth - window.innerWidth > threshold;
                const heightThreshold = window.outerHeight - window.innerHeight > threshold;
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ execute script
                const startTime = performance.now();
                try {
                    eval("debugger");
                } catch(e) {}
                const endTime = performance.now();
                
                const debuggerThreshold = endTime - startTime > 100;
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö console object
                const consoleThreshold = !!console.profile || !!console.memory;
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ function constructor
                const evalThreshold = eval.toString().length < 10 || 
                                     Function.toString().length < 10;
                
                // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö DevTools ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ error stack
                let stackThreshold = false;
                try {
                    throw new Error();
                } catch(e) {
                    stackThreshold = e.stack && e.stack.includes("chrome-devtools") || 
                                    e.stack && e.stack.includes("devtools");
                }
                
                // ‡∏´‡∏≤‡∏Å‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏î ‡πÜ ‡πÉ‡∏´‡πâ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡∏¥‡∏î DevTools
                if (widthThreshold || heightThreshold || debuggerThreshold || 
                    consoleThreshold || evalThreshold || stackThreshold) {
                    
                    if (!devToolsOpened) {
                        devToolsOpened = true;
                        triggerProtection();
                    }
                }
            }
            
            // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏£‡∏∞‡∏ï‡∏∏‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô
            function triggerProtection() {
                if (protectionActive) return;
                protectionActive = true;
                
                // ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö
                if (detectionInterval) {
                    clearInterval(detectionInterval);
                }
                
                // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                showProtectionWarning();
                
                // ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
                setTimeout(() => {
                    try {
                        // ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á
                        if (window.close && !window.closed) {
                            window.close();
                        }
                        
                        // ‡∏´‡∏≤‡∏Å‡∏õ‡∏¥‡∏î‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ redirect ‡πÑ‡∏õ‡∏ó‡∏µ‡πà about:blank
                        if (!window.closed) {
                            window.location.href = 'about:blank';
                        }
                        
                        // ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏õ‡∏¥‡∏î‡πÅ‡∏ó‡πá‡∏ö
                        if (document.body) {
                            document.body.innerHTML = '';
                        }
                        if (document.head) {
                            document.head.innerHTML = '';
                        }
                        
                        // ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        try {
                            localStorage.clear();
                            sessionStorage.clear();
                            indexedDB.deleteDatabase('firebaseLocalStorageDb');
                        } catch(e) {}
                        
                    } catch(e) {
                        // ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏¥‡∏î‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏•‡∏≤‡∏¢‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö
                        try {
                            if (document.documentElement) {
                                document.documentElement.innerHTML = '';
                                document.documentElement.style.display = 'none';
                            }
                            
                            // ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏¥‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
                            try {
                                const newWindow = window.open('', '_self', '');
                                if (newWindow) {
                                    newWindow.close();
                                }
                            } catch(e2) {
                                // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏î‡∏≥
                                if (document.body) {
                                    document.body.innerHTML = `
                                        <div style="position:fixed;top:0;left:0;width:100%;height:100%;background:#000;color:#fff;display:flex;align-items:center;justify-content:center;font-size:24px;z-index:9999999;">
                                            <div style="text-align:center;">
                                                <div style="font-size:60px;margin-bottom:20px;">‚ö†Ô∏è</div>
                                                <div style="font-weight:bold;margin-bottom:10px;">‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏£‡∏∞‡∏ö‡∏ö!</div>
                                                <div style="opacity:0.8;">‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡∏õ‡∏¥‡∏î‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢</div>
                                            </div>
                                        </div>
                                    `;
                                }
                            }
                        } catch(e3) {}
                    }
                }, 2000);
            }
            
            // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            function showProtectionWarning() {
                // ‡∏•‡πâ‡∏≤‡∏á overlay ‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
                const oldOverlay = document.getElementById('protectionWarningOverlay');
                if (oldOverlay) {
                    oldOverlay.remove();
                }
                
                // ‡∏™‡∏£‡πâ‡∏≤‡∏á overlay ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                const overlay = document.createElement('div');
                overlay.id = 'protectionWarningOverlay';
                overlay.className = 'protection-warning';
                
                overlay.innerHTML = `
                    <div class="protection-content">
                        <div style="font-size: 60px; margin-bottom: 20px;">üö´</div>
                        <h2 style="margin-bottom: 20px; font-size: 28px;">‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏£‡∏∞‡∏ö‡∏ö!</h2>
                        <p style="font-size: 18px; margin-bottom: 20px;">‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡∏•‡∏∞‡πÄ‡∏°‡∏¥‡∏î‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö</p>
                        <p style="font-size: 16px; opacity: 0.8; margin-bottom: 30px;">‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏õ‡∏¥‡∏î‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÉ‡∏ô 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</p>
                        <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 10px; font-family: monospace;">
                            ERROR: SECURITY_VIOLATION_DETECTED
                        </div>
                    </div>
                `;
                
                document.body.appendChild(overlay);
                
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏Å‡∏£‡∏∞‡∏û‡∏£‡∏¥‡∏ö
                let blinkCount = 0;
                const blinkInterval = setInterval(() => {
                    overlay.style.opacity = overlay.style.opacity === '0.9' ? '1' : '0.9';
                    blinkCount++;
                    if (blinkCount > 10) {
                        clearInterval(blinkInterval);
                    }
                }, 100);
                
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô (‡∏ñ‡πâ‡∏≤‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï)
                try {
                    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.frequency.setValueAtTime(200, audioContext.currentTime);
                    oscillator.frequency.setValueAtTime(100, audioContext.currentTime + 0.1);
                    oscillator.frequency.setValueAtTime(150, audioContext.currentTime + 0.2);
                    
                    gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                    
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.5);
                } catch(e) {
                    // ‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÑ‡∏î‡πâ ‡πÉ‡∏´‡πâ‡∏Ç‡πâ‡∏≤‡∏°‡πÑ‡∏õ
                }
            }
            
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏•‡∏¥‡∏Å‡∏Ç‡∏ß‡∏≤
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
                triggerProtection();
                return false;
            });
            
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏±‡∏î‡∏ï‡πà‡∏≤‡∏á‡πÜ
            document.addEventListener('keydown', function(e) {
                // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô F12
                if (e.key === 'F12' || e.keyCode === 123) {
                    e.preventDefault();
                    triggerProtection();
                    return false;
                }
                
                // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Ctrl+Shift+I
                if (e.ctrlKey && e.shiftKey && e.key === 'I') {
                    e.preventDefault();
                    triggerProtection();
                    return false;
                }
                
                // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Ctrl+Shift+J
                if (e.ctrlKey && e.shiftKey && e.key === 'J') {
                    e.preventDefault();
                    triggerProtection();
                    return false;
                }
                
                // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Ctrl+Shift+C
                if (e.ctrlKey && e.shiftKey && e.key === 'C') {
                    e.preventDefault();
                    triggerProtection();
                    return false;
                }
                
                // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Ctrl+U
                if (e.ctrlKey && e.key === 'u') {
                    e.preventDefault();
                    triggerProtection();
                    return false;
                }
                
                // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Ctrl+S
                if (e.ctrlKey && e.key === 's') {
                    e.preventDefault();
                    triggerProtection();
                    return false;
                }
                
                // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Ctrl+W (‡∏õ‡∏¥‡∏î‡πÅ‡∏ó‡πá‡∏ö)
                if (e.ctrlKey && e.key === 'w') {
                    e.preventDefault();
                    triggerProtection();
                    return false;
                }
                
                // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Alt+F4
                if (e.altKey && e.key === 'F4') {
                    e.preventDefault();
                    triggerProtection();
                    return false;
                }
                
                // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Alt+Tab
                if (e.altKey && e.key === 'Tab') {
                    e.preventDefault();
                    triggerProtection();
                    return false;
                }
            });
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î Developer Tools ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ interval
            detectionInterval = setInterval(detectDevTools, 100);
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ç‡∏ô‡∏≤‡∏î
            window.addEventListener('resize', detectDevTools);
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡πÄ‡∏°‡∏∑‡πà‡∏≠ focus ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô (‡∏ö‡∏≤‡∏á‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡πÄ‡∏õ‡∏¥‡∏î DevTools ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏¢‡∏Å)
            window.addEventListener('blur', function() {
                setTimeout(() => {
                    if (document.hidden || document.visibilityState === 'hidden') {
                        detectDevTools();
                    }
                }, 100);
            });
            
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡πÇ‡∏Ñ‡πâ‡∏î‡∏ú‡πà‡∏≤‡∏ô console
            Object.defineProperty(window, 'console', {
                value: console,
                writable: false,
                configurable: false
            });
            
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô console ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç
            const originalConsole = {
                log: console.log,
                warn: console.warn,
                error: console.error,
                info: console.info,
                debug: console.debug
            };
            
            console.log = function() {
                triggerProtection();
                return originalConsole.log.apply(console, arguments);
            };
            
            console.warn = function() {
                triggerProtection();
                return originalConsole.warn.apply(console, arguments);
            };
            
            console.error = function() {
                triggerProtection();
                return originalConsole.error.apply(console, arguments);
            };
            
            console.info = function() {
                triggerProtection();
                return originalConsole.info.apply(console, arguments);
            };
            
            console.debug = function() {
                triggerProtection();
                return originalConsole.debug.apply(console, arguments);
            };
            
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á document.write
            const originalWrite = document.write;
            document.write = function() {
                triggerProtection();
                return originalWrite.apply(this, arguments);
            };
            
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á document.writeln
            const originalWriteLn = document.writeln;
            document.writeln = function() {
                triggerProtection();
                return originalWriteLn.apply(this, arguments);
            };
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
            originalConsole.log('üîí ‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß');
            originalConsole.log('‚ö†Ô∏è ‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô: ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î Developer Tools ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡∏ñ‡∏π‡∏Å‡∏õ‡∏¥‡∏î‡∏ó‡∏±‡∏ô‡∏ó‡∏µ');
            originalConsole.log('üë§ ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö: admin / admin123, manager / manager123, user / user123');
            
            // ‡∏à‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            window.onerror = function(message, source, lineno, colno, error) {
                if (message && (
                    message.includes('debugger') || 
                    message.includes('DevTools') || 
                    message.includes('inspect') ||
                    message.includes('chrome-devtools')
                )) {
                    triggerProtection();
                }
                return false;
            };
            
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£ inspect element ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
            document.addEventListener('DOMContentLoaded', function() {
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
                Object.defineProperty(document, 'hidden', {
                    get: function() {
                        detectDevTools();
                        return false;
                    }
                });
                
                Object.defineProperty(document, 'visibilityState', {
                    get: function() {
                        detectDevTools();
                        return 'visible';
                    }
                });
            });
            
        })();
    </script>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
    <!-- Alert Container -->
    <div id="alertContainer" class="alert-container"></div>
    
    <!-- Toast Container -->
    <div id="toastContainer"></div>
    
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="text-center">
            <div class="inline-block p-6 bg-gray-800 rounded-2xl shadow-2xl animate__animated animate__pulse">
                <div class="w-16 h-16 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"></div>
                <p class="text-white text-lg font-medium" id="loadingMessage">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</p>
                <p class="text-gray-400 text-sm mt-2 animate-pulse">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</p>
            </div>
        </div>
    </div>

    <!-- Login Page (‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å) -->
    <div id="loginPage" class="min-h-screen flex items-center justify-center p-4 page-transition">
        <!-- Login Container -->
        <div class="bg-gray-800 rounded-2xl shadow-2xl overflow-hidden w-full max-w-md animate__animated animate__fadeIn">
            <!-- Header -->
            <div class="bg-gradient-to-r from-indigo-700 to-purple-700 p-8 text-center relative overflow-hidden">
                <div class="absolute inset-0 bg-black opacity-10"></div>
                <div class="floating inline-block p-4 bg-white/10 rounded-full mb-4 relative z-10">
                    <i class="fas fa-cash-register text-white text-3xl"></i>
                </div>
                <h1 class="text-3xl font-bold text-white relative z-10">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢</h1>
                <p class="text-indigo-200 mt-2 relative z-10">Inventory & Sales Management System</p>
                
                <!-- Decorative elements -->
                <div class="absolute top-0 left-0 w-20 h-20 bg-white/5 rounded-full -translate-x-10 -translate-y-10"></div>
                <div class="absolute bottom-0 right-0 w-32 h-32 bg-white/5 rounded-full translate-x-16 translate-y-16"></div>
            </div>
            
            <!-- Login Form -->
            <div class="p-8">
                <h2 class="text-2xl font-bold text-white mb-2 animate__animated animate__fadeIn animate__delay-1s">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
                <p class="text-gray-400 mb-6 animate__animated animate__fadeIn animate__delay-1s">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</p>
                
                <form id="loginForm" class="animate__animated animate__fadeIn animate__delay-1s">
                    <div class="space-y-5">
                        <div class="animate__animated animate__fadeInUp animate__delay-2s">
                            <label for="username" class="block text-sm font-medium text-gray-300 mb-2">
                                <i class="fas fa-user mr-2"></i>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
                            </label>
                            <input 
                                type="text" 
                                id="username" 
                                required 
                                placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ"
                                class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-white placeholder-gray-400 transition-all duration-300"
                            >
                        </div>
                        
                        <div class="animate__animated animate__fadeInUp animate__delay-3s">
                            <label for="password" class="block text-sm font-medium text-gray-300 mb-2">
                                <i class="fas fa-lock mr-2"></i>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
                            </label>
                            <input 
                                type="password" 
                                id="password" 
                                required 
                                placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô"
                                class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-white placeholder-gray-400 transition-all duration-300"
                            >
                        </div>
                        
                        <div class="pt-4 animate__animated animate__fadeInUp animate__delay-4s">
                            <button 
                                type="submit" 
                                id="loginBtn"
                                class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center space-x-2 btn-glow transition-all duration-300 pulse"
                            >
                                <i class="fas fa-sign-in-alt"></i>
                                <span>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span>
                            </button>
                        </div>
                    </div>
                </form>
                
                <!-- Demo Accounts -->
                <div class="mt-8 pt-6 border-t border-gray-700 animate__animated animate__fadeIn animate__delay-5s">
                    <h3 class="text-sm font-medium text-gray-300 mb-3 flex items-center">
                        <i class="fas fa-info-circle mr-2 text-yellow-400"></i> ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏£‡∏∞‡∏ö‡∏ö:
                    </h3>
                    <div class="space-y-2 text-sm">
                        <div class="bg-gray-900/50 p-3 rounded-lg product-card">
                            <p class="text-gray-400"><span class="font-medium text-gray-300">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ:</span> user / user123</p>
                            <p class="text-gray-400 text-xs mt-1">‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÑ‡∏î‡πâ</p>
                        </div>
                        <div class="bg-gray-900/50 p-3 rounded-lg product-card">
                            <p class="text-gray-400"><span class="font-medium text-gray-300">‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£:</span> manager / manager123</p>
                            <p class="text-gray-400 text-xs mt-1">‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÑ‡∏î‡πâ</p>
                        </div>
                        <div class="bg-gray-900/50 p-3 rounded-lg product-card">
                            <p class="text-gray-400"><span class="font-medium text-gray-300">‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö:</span> admin / admin123</p>
                            <p class="text-gray-400 text-xs mt-1">‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô ‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</p>
                        </div>
                    </div>
                </div>
                
                <!-- System Status -->
                <div class="mt-6 p-3 bg-gray-900/30 rounded-lg animate__animated animate__fadeIn animate__delay-6s">
                    <div class="flex items-center">
                        <div id="firebaseStatus" class="w-3 h-3 rounded-full bg-green-500 mr-3 animate-pulse"></div>
                        <p id="firebaseStatusText" class="text-gray-300 text-sm">‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
                    </div>
                </div>
            </div>
            
            <!-- Footer -->
            <div class="bg-gray-900 p-4 text-center animate__animated animate__fadeIn animate__delay-6s">
                <p class="text-gray-500 text-sm">
                    <i class="fas fa-cube mr-1"></i> ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ Firebase
                </p>
            </div>
        </div>
    </div>

    <!-- Main Application Container -->
    <div id="appContainer" class="hidden">
        <!-- Header -->
        <header class="bg-gray-800 shadow-lg sticky top-0 z-50 animate__animated animate__fadeInDown">
            <div class="container mx-auto px-4 py-4">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="flex items-center space-x-3 mb-4 md:mb-0">
                        <a href="#" id="homeBtn" class="flex items-center space-x-3">
                            <div class="bg-indigo-600 p-3 rounded-lg hover-effect">
                                <i class="fas fa-cash-register text-white text-2xl"></i>
                            </div>
                            <div>
                                <h1 class="text-2xl md:text-3xl font-bold">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢</h1>
                                <p class="text-gray-400 text-sm">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£</p>
                            </div>
                        </a>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <!-- User Info -->
                        <div class="hidden md:flex items-center space-x-3 bg-gray-700 px-4 py-2 rounded-lg product-card cursor-pointer" id="userInfoBtn">
                            <div class="w-8 h-8 bg-indigo-600 rounded-full flex items-center justify-center hover-effect">
                                <i class="fas fa-user text-white"></i>
                            </div>
                            <div>
                                <p class="font-medium" id="currentUsername">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>
                                <div class="flex items-center space-x-2">
                                    <span id="userRoleBadge" class="role-badge role-user">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</span>
                                    <span class="text-gray-400 text-xs" id="userRoleText"></span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Notification Bell -->
                        <div class="relative">
                            <button id="notificationBtn" class="p-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors relative">
                                <i class="fas fa-bell text-gray-300"></i>
                                <span id="notificationBadge" class="notification-badge hidden">0</span>
                            </button>
                        </div>
                        
                        <!-- Logout Button -->
                        <button id="logoutBtn" class="bg-gradient-to-r from-gray-700 to-gray-600 hover:from-gray-600 hover:to-gray-500 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
                        </button>
                    </div>
                </div>
                
                <!-- Navigation -->
                <div class="mt-4 flex flex-wrap gap-2 border-t border-gray-700 pt-4">
                    <button id="navDashboard" class="nav-link active">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î</span>
                    </button>
                    <button id="navProducts" class="nav-link">
                        <i class="fas fa-box"></i>
                        <span>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                    </button>
                    <button id="navSales" class="nav-link">
                        <i class="fas fa-shopping-cart"></i>
                        <span>‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                    </button>
                    <button id="navSalesReport" class="nav-link">
                        <i class="fas fa-chart-line"></i>
                        <span>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</span>
                    </button>
                    <button id="navUsers" class="nav-link">
                        <i class="fas fa-users"></i>
                        <span>‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</span>
                    </button>
                    <button id="navSettings" class="nav-link">
                        <i class="fas fa-cog"></i>
                        <span>‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="container mx-auto px-4 py-8">
            <!-- Dashboard Page -->
            <div id="dashboardPage" class="page-content">
                <!-- Welcome Message -->
                <div class="bg-gradient-to-r from-gray-800 to-gray-700 rounded-xl p-6 shadow-lg mb-8 animate__animated animate__fadeIn">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                        <div>
                            <h2 class="text-2xl font-bold mb-2 animate__animated animate__fadeInLeft">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö, <span id="welcomeUsername" class="text-indigo-300">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</span>!</h2>
                            <p class="text-gray-300 animate__animated animate__fadeInLeft animate__delay-1s" id="welcomeMessage">‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÉ‡∏ä‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£</p>
                        </div>
                        <div class="mt-4 md:mt-0 animate__animated animate__fadeInRight">
                            <div class="flex items-center space-x-2">
                                <div class="w-3 h-3 rounded-full bg-green-500 animate-pulse"></div>
                                <p class="text-green-300 text-sm" id="connectionStatus">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Statistics Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-gray-800 rounded-xl p-6 shadow-lg hover-effect product-card animate__animated animate__fadeInUp" style="animation-delay: 0.1s">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-400 text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                                <h3 id="totalProducts" class="text-3xl font-bold mt-2 shimmer">0</h3>
                            </div>
                            <div class="bg-indigo-900 p-4 rounded-lg hover-effect">
                                <i class="fas fa-box text-indigo-300 text-2xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl p-6 shadow-lg hover-effect product-card animate__animated animate__fadeInUp" style="animation-delay: 0.2s">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-400 text-sm">‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                                <h3 id="totalValue" class="text-3xl font-bold mt-2 shimmer">‡∏ø0</h3>
                            </div>
                            <div class="bg-green-900 p-4 rounded-lg hover-effect">
                                <i class="fas fa-coins text-green-300 text-2xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl p-6 shadow-lg hover-effect product-card animate__animated animate__fadeInUp" style="animation-delay: 0.3s">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-400 text-sm">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                                <h3 id="todaySales" class="text-3xl font-bold mt-2 shimmer">‡∏ø0</h3>
                            </div>
                            <div class="bg-yellow-900 p-4 rounded-lg hover-effect">
                                <i class="fas fa-money-bill-wave text-yellow-300 text-2xl"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl p-6 shadow-lg hover-effect product-card animate__animated animate__fadeInUp" style="animation-delay: 0.4s">
                        <div class="flex justify-between items-center">
                            <div>
                                <p class="text-gray-400 text-sm">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å</p>
                                <h3 id="outOfStock" class="text-3xl font-bold mt-2 shimmer">0</h3>
                            </div>
                            <div class="bg-red-900 p-4 rounded-lg hover-effect">
                                <i class="fas fa-exclamation-triangle text-red-300 text-2xl"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Quick Actions -->
                <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
                    <button id="quickSaleBtn" class="bg-gradient-to-r from-green-700 to-emerald-700 hover:from-green-800 hover:to-emerald-800 text-white font-bold py-3 px-4 rounded-lg flex flex-col items-center justify-center space-y-2 btn-glow transition-all duration-300 hover-effect animate__animated animate__fadeInUp" style="animation-delay: 0.5s">
                        <i class="fas fa-cash-register text-2xl"></i>
                        <span class="text-sm">‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                    </button>
                    
                    <button id="quickAddProductBtn" class="bg-gradient-to-r from-blue-700 to-cyan-700 hover:from-blue-800 hover:to-cyan-800 text-white font-bold py-3 px-4 rounded-lg flex flex-col items-center justify-center space-y-2 btn-glow transition-all duration-300 hover-effect animate__animated animate__fadeInUp" style="animation-delay: 0.6s">
                        <i class="fas fa-plus-circle text-2xl"></i>
                        <span class="text-sm">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                    </button>
                    
                    <button id="quickReportBtn" class="bg-gradient-to-r from-purple-700 to-pink-700 hover:from-purple-800 hover:to-pink-800 text-white font-bold py-3 px-4 rounded-lg flex flex-col items-center justify-center space-y-2 btn-glow transition-all duration-300 hover-effect animate__animated animate__fadeInUp" style="animation-delay: 0.7s">
                        <i class="fas fa-chart-bar text-2xl"></i>
                        <span class="text-sm">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</span>
                    </button>
                    
                    <button id="quickHelpBtn" class="bg-gradient-to-r from-yellow-700 to-orange-700 hover:from-yellow-800 hover:to-orange-800 text-white font-bold py-3 px-4 rounded-lg flex flex-col items-center justify-center space-y-2 btn-glow transition-all duration-300 hover-effect animate__animated animate__fadeInUp" style="animation-delay: 0.8s">
                        <i class="fas fa-question-circle text-2xl"></i>
                        <span class="text-sm">‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠</span>
                    </button>
                </div>
                
                <!-- Recent Sales -->
                <div class="bg-gray-800 rounded-xl shadow-lg p-6 mb-8 animate__animated animate__fadeInUp" style="animation-delay: 0.9s">
                    <h2 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-history mr-2 text-indigo-400"></i> ‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                    </h2>
                    <div id="recentSales" class="space-y-3">
                        <div class="text-center py-8 text-gray-500">
                            <i class="fas fa-clock text-2xl mb-2"></i>
                            <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</p>
                        </div>
                    </div>
                </div>
                
                <!-- System Info -->
                <div class="bg-gray-800 rounded-xl shadow-lg p-6 animate__animated animate__fadeInUp" style="animation-delay: 1s">
                    <h2 class="text-xl font-bold mb-4 flex items-center">
                        <i class="fas fa-info-circle mr-2 text-green-400"></i> ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö
                    </h2>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="bg-gray-900/50 p-4 rounded-lg product-card hover-effect">
                            <p class="text-gray-400 text-sm">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p>
                            <p class="font-medium">5.0.0</p>
                        </div>
                        <div class="bg-gray-900/50 p-4 rounded-lg product-card hover-effect">
                            <p class="text-gray-400 text-sm">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
                            <p class="font-medium">Firebase Realtime Database</p>
                        </div>
                        <div class="bg-gray-900/50 p-4 rounded-lg product-card hover-effect">
                            <p class="text-gray-400 text-sm">‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤</p>
                            <p class="font-medium">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Products Management Page -->
            <div id="productsPage" class="page-content hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h2 class="text-2xl font-bold flex items-center">
                            <i class="fas fa-box mr-2 text-indigo-400"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                        </h2>
                        <p class="text-gray-400 text-sm mt-1">‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏•‡∏ö ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                    </div>
                    <div class="mt-4 md:mt-0 flex space-x-2">
                        <button id="addProductMainBtn" class="bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-plus"></i>
                            <span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</span>
                        </button>
                        <button id="exportProductsBtn" class="bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-download"></i>
                            <span>‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
                        </button>
                        <button id="refreshProductsBtn" class="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-sync-alt"></i>
                            <span>‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä</span>
                        </button>
                    </div>
                </div>
                
                <!-- Product Table -->
                <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden mb-8">
                    <div class="p-6 border-b border-gray-700">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                            <div>
                                <h3 class="text-lg font-bold">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                                <p class="text-gray-400 text-sm mt-1" id="productsTableInfo">‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p>
                            </div>
                            <div class="mt-3 md:mt-0">
                                <div class="flex items-center space-x-2">
                                    <div class="relative">
                                        <input type="text" id="productSearch" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤..." class="bg-gray-700 border border-gray-600 rounded-lg pl-10 pr-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent w-64">
                                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-4">
                        <table id="productsTable" class="min-w-full divide-y divide-gray-700">
                            <thead>
                                <tr class="bg-gray-900">
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏ß‡∏°</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                </tr>
                            </thead>
                            <tbody id="productsTableBody" class="divide-y divide-gray-700">
                                <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏î‡∏¢ JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Product Statistics -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="bg-gradient-to-r from-indigo-800 to-purple-800 rounded-xl p-6 shadow-lg">
                        <div class="flex items-center">
                            <div class="mr-4">
                                <i class="fas fa-box-open text-3xl text-white"></i>
                            </div>
                            <div>
                                <p class="text-gray-300 text-sm">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                                <p id="totalProductsCount" class="text-2xl font-bold">0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-green-800 to-emerald-800 rounded-xl p-6 shadow-lg">
                        <div class="flex items-center">
                            <div class="mr-4">
                                <i class="fas fa-coins text-3xl text-white"></i>
                            </div>
                            <div>
                                <p class="text-gray-300 text-sm">‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏ß‡∏°</p>
                                <p id="totalProductsValue" class="text-2xl font-bold">‡∏ø0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-red-800 to-pink-800 rounded-xl p-6 shadow-lg">
                        <div class="flex items-center">
                            <div class="mr-4">
                                <i class="fas fa-exclamation-triangle text-3xl text-white"></i>
                            </div>
                            <div>
                                <p class="text-gray-300 text-sm">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å</p>
                                <p id="outOfStockCount" class="text-2xl font-bold">0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sales Page (‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤) -->
            <div id="salesPage" class="page-content hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h2 class="text-2xl font-bold flex items-center">
                            <i class="fas fa-shopping-cart mr-2 text-green-400"></i> ‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                        </h2>
                        <p class="text-gray-400 text-sm mt-1">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ï‡∏±‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
                    </div>
                    <div class="mt-4 md:mt-0 flex space-x-2">
                        <button id="newSaleBtn" class="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-receipt"></i>
                            <span>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÉ‡∏´‡∏°‡πà</span>
                        </button>
                        <button id="refreshSalesProductsBtn" class="bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-sync-alt"></i>
                            <span>‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                        </button>
                        <button id="qrPaymentBtn" class="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-qrcode"></i>
                            <span>QR Payment</span>
                        </button>
                    </div>
                </div>
                
                <!-- Sales Interface -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Left Column: Product Selection -->
                    <div class="lg:col-span-2">
                        <!-- Product Search and Filter -->
                        <div class="bg-gray-800 rounded-xl shadow-lg p-6 mb-6">
                            <h3 class="text-lg font-bold mb-4 flex items-center">
                                <i class="fas fa-search mr-2 text-indigo-400"></i> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                            </h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <div class="relative">
                                    <input type="text" id="salesProductSearch" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™..." class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent pl-10">
                                    <i class="fas fa-search absolute left-3 top-3.5 text-gray-400"></i>
                                </div>
                                <div>
                                    <select id="salesCategoryFilter" class="w-full px-4 py-3 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                        <option value="">‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</option>
                                        <option value="‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå">‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå</option>
                                        <option value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô</option>
                                        <option value="‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå">‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå</option>
                                        <option value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</option>
                                        <option value="‡∏≠‡∏≤‡∏´‡∏≤‡∏£">‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
                                        <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Product List -->
                            <div class="bg-gray-900 rounded-lg p-4 cart-scroll" style="max-height: 500px;">
                                <div id="salesProductList" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <!-- Products will be loaded here -->
                                    <div class="text-center py-12 text-gray-500">
                                        <i class="fas fa-box-open text-3xl mb-3"></i>
                                        <p>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Current Sale Details -->
                        <div class="bg-gray-800 rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-bold mb-4 flex items-center">
                                <i class="fas fa-receipt mr-2 text-yellow-400"></i> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
                            </h3>
                            <div class="mb-4">
                                <div class="flex items-center space-x-4 mb-4">
                                    <div class="flex-1">
                                        <label for="customerName" class="block text-sm font-medium text-gray-300 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</label>
                                        <input type="text" id="customerName" placeholder="‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                    </div>
                                    <div class="flex-1">
                                        <label for="paymentMethod" class="block text-sm font-medium text-gray-300 mb-1">‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</label>
                                        <select id="paymentMethod" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                            <option value="‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</option>
                                            <option value="‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô">‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</option>
                                            <option value="‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï">‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï</option>
                                            <option value="QR Payment">QR Payment</option>
                                            <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <!-- Bank Account Details (shown when transfer is selected) -->
                                <div id="bankAccountInfo" class="bg-gray-900 p-4 rounded-lg mb-4 hidden">
                                    <h4 class="font-bold text-green-400 mb-2 flex items-center">
                                        <i class="fas fa-university mr-2"></i> ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£
                                    </h4>
                                    <div class="grid grid-cols-2 gap-3">
                                        <div>
                                            <p class="text-gray-400 text-sm">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</p>
                                            <p class="font-bold">‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢</p>
                                        </div>
                                        <div>
                                            <p class="text-gray-400 text-sm">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</p>
                                            <p class="font-bold">123-4-56789-0</p>
                                        </div>
                                        <div>
                                            <p class="text-gray-400 text-sm">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</p>
                                            <p class="font-bold">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</p>
                                        </div>
                                        <div>
                                            <p class="text-gray-400 text-sm">‡∏™‡∏≤‡∏Ç‡∏≤</p>
                                            <p class="font-bold">‡∏™‡∏≤‡∏Ç‡∏≤‡∏´‡∏•‡∏±‡∏Å</p>
                                        </div>
                                    </div>
                                    <div class="mt-3 p-2 bg-yellow-900/30 rounded border border-yellow-700">
                                        <p class="text-yellow-300 text-sm flex items-center">
                                            <i class="fas fa-info-circle mr-2"></i>
                                            ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
                                        </p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Cart Items -->
                            <div class="bg-gray-900 rounded-lg p-4 cart-scroll mb-4" style="max-height: 300px;">
                                <div id="cartItems" class="space-y-3">
                                    <div class="text-center py-8 text-gray-500">
                                        <i class="fas fa-shopping-cart text-2xl mb-2"></i>
                                        <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>
                                        <p class="text-sm">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Cart Summary -->
                            <div class="bg-gray-900 rounded-lg p-4">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-gray-400">‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                                    <span id="cartSubtotal" class="text-xl font-bold">‡∏ø0.00</span>
                                </div>
                                <div class="flex justify-between items-center mb-4">
                                    <span class="text-gray-400">‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î</span>
                                    <div class="flex items-center space-x-2">
                                        <input type="number" id="discountAmount" min="0" value="0" class="w-24 px-3 py-1 bg-gray-700 border border-gray-600 rounded text-right">
                                        <span>‡∏ø</span>
                                    </div>
                                </div>
                                <div class="flex justify-between items-center border-t border-gray-700 pt-4 mb-6">
                                    <span class="text-lg font-bold">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</span>
                                    <span id="cartTotal" class="text-2xl font-bold text-green-400">‡∏ø0.00</span>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    <button id="clearCartBtn" class="py-3 bg-gray-700 hover:bg-gray-600 rounded-lg font-medium transition-colors hover-effect">
                                        <i class="fas fa-trash-alt mr-2"></i> ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                                    </button>
                                    <button id="completeSaleBtn" class="py-3 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-lg font-medium transition-colors hover-effect">
                                        <i class="fas fa-check-circle mr-2"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Right Column: Sales Info and Recent Sales -->
                    <div class="space-y-6">
                        <!-- Today's Sales Stats -->
                        <div class="bg-gray-800 rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-bold mb-4 flex items-center">
                                <i class="fas fa-chart-line mr-2 text-green-400"></i> ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
                            </h3>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-400">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</span>
                                    <span id="todaySalesCount" class="font-bold text-lg">0</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-400">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°</span>
                                    <span id="todaySalesTotal" class="font-bold text-lg text-green-400">‡∏ø0.00</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-400">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ</span>
                                    <span id="todayItemsSold" class="font-bold text-lg">0</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Quick Product Actions -->
                        <div class="bg-gray-800 rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-bold mb-4 flex items-center">
                                <i class="fas fa-bolt mr-2 text-yellow-400"></i> ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡πà‡∏ß‡∏ô
                            </h3>
                            <div class="space-y-3">
                                <button id="addQuickProductBtn" class="w-full py-3 bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors hover-effect">
                                    <i class="fas fa-plus-circle"></i>
                                    <span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡πá‡∏ß</span>
                                </button>
                                <button id="viewLowStockBtn" class="w-full py-3 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 rounded-lg font-medium flex items-center justify-center space-x-2 transition-colors hover-effect">
                                    <i class="fas fa-exclamation-triangle"></i>
                                    <span>‡∏î‡∏π‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Recent Sales -->
                        <div class="bg-gray-800 rounded-xl shadow-lg p-6">
                            <h3 class="text-lg font-bold mb-4 flex items-center">
                                <i class="fas fa-history mr-2 text-indigo-400"></i> ‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
                            </h3>
                            <div id="recentSalesList" class="space-y-3">
                                <div class="text-center py-4 text-gray-500">
                                    <i class="fas fa-receipt text-xl mb-2"></i>
                                    <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sales Report Page -->
            <div id="salesReportPage" class="page-content hidden">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold flex items-center">
                        <i class="fas fa-chart-line mr-2 text-green-400"></i> ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
                    </h2>
                    <p class="text-gray-400 text-sm mt-1">‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏™‡∏£‡∏∏‡∏õ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</p>
                </div>
                
                <!-- Report Filters -->
                <div class="bg-gray-800 rounded-xl shadow-lg p-6 mb-8">
                    <h3 class="text-lg font-bold mb-4 flex items-center">
                        <i class="fas fa-filter mr-2 text-indigo-400"></i> ‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                    </h3>
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</label>
                            <input type="date" id="reportStartDate" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-1">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î</label>
                            <input type="date" id="reportEndDate" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-300 mb-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</label>
                            <select id="reportCategoryFilter" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent">
                                <option value="">‡∏ó‡∏∏‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</option>
                                <option value="‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå">‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå</option>
                                <option value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô</option>
                                <option value="‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå">‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå</option>
                                <option value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</option>
                                <option value="‡∏≠‡∏≤‡∏´‡∏≤‡∏£">‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
                                <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                            </select>
                        </div>
                        <div class="flex items-end">
                            <button id="generateReportBtn" class="w-full py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 rounded-lg font-medium transition-colors hover-effect">
                                <i class="fas fa-chart-bar mr-2"></i> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- Sales Statistics -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-gradient-to-r from-indigo-800 to-purple-800 rounded-xl p-6 shadow-lg stat-card">
                        <div class="flex items-center">
                            <div class="mr-4">
                                <i class="fas fa-receipt text-3xl text-white"></i>
                            </div>
                            <div>
                                <p class="text-gray-300 text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</p>
                                <p id="totalSalesCount" class="text-2xl font-bold">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-green-800 to-emerald-800 rounded-xl p-6 shadow-lg stat-card">
                        <div class="flex items-center">
                            <div class="mr-4">
                                <i class="fas fa-money-bill-wave text-3xl text-white"></i>
                            </div>
                            <div>
                                <p class="text-gray-300 text-sm">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°</p>
                                <p id="totalSalesAmount" class="text-2xl font-bold">‡∏ø0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-blue-800 to-cyan-800 rounded-xl p-6 shadow-lg stat-card">
                        <div class="flex items-center">
                            <div class="mr-4">
                                <i class="fas fa-boxes text-3xl text-white"></i>
                            </div>
                            <div>
                                <p class="text-gray-300 text-sm">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ</p>
                                <p id="totalItemsSold" class="text-2xl font-bold">0</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-yellow-800 to-orange-800 rounded-xl p-6 shadow-lg stat-card">
                        <div class="flex items-center">
                            <div class="mr-4">
                                <i class="fas fa-percentage text-3xl text-white"></i>
                            </div>
                            <div>
                                <p class="text-gray-300 text-sm">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢/‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
                                <p id="averageSaleAmount" class="text-2xl font-bold">‡∏ø0</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Report Tabs -->
                <div class="flex border-b border-gray-700 mb-6">
                    <div class="tab active" data-tab="dailyReport">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</div>
                    <div class="tab" data-tab="topProductsReport">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ</div>
                    <div class="tab" data-tab="salesListReport">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
                </div>
                
                <!-- Daily Report -->
                <div id="dailyReport" class="tab-content">
                    <div class="bg-gray-800 rounded-xl shadow-lg p-6 mb-8">
                        <h3 class="text-lg font-bold mb-4">‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h3>
                        <div id="dailySalesChart" class="h-64 flex items-center justify-center">
                            <div class="text-center text-gray-500">
                                <i class="fas fa-chart-bar text-3xl mb-3"></i>
                                <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</p>
                                <p class="text-sm">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gray-800 rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-bold mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-700">
                                <thead>
                                    <tr class="bg-gray-900">
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</th>
                                    </tr>
                                </thead>
                                <tbody id="dailySalesTableBody" class="divide-y divide-gray-700">
                                    <tr>
                                        <td colspan="5" class="px-4 py-8 text-center text-gray-500">
                                            <i class="fas fa-chart-line text-xl mb-2"></i>
                                            <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Top Products Report -->
                <div id="topProductsReport" class="tab-content hidden">
                    <div class="bg-gray-800 rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-bold mb-4">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ 10 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÅ‡∏£‡∏Å</h3>
                        <div id="topProductsList" class="space-y-4">
                            <div class="text-center py-12 text-gray-500">
                                <i class="fas fa-crown text-3xl mb-3"></i>
                                <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ</p>
                                <p class="text-sm">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Sales List Report -->
                <div id="salesListReport" class="tab-content hidden">
                    <div class="bg-gray-800 rounded-xl shadow-lg p-6">
                        <h3 class="text-lg font-bold mb-4">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-700">
                                <thead>
                                    <tr class="bg-gray-900">
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢</th>
                                        <th class="px-4 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                    </tr>
                                </thead>
                                <tbody id="salesListTableBody" class="divide-y divide-gray-700">
                                    <tr>
                                        <td colspan="8" class="px-4 py-8 text-center text-gray-500">
                                            <i class="fas fa-receipt text-xl mb-2"></i>
                                            <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <!-- Export Options -->
                <div class="bg-gray-800 rounded-xl p-6 shadow-lg mt-8">
                    <h3 class="text-lg font-bold mb-4">‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å</h3>
                    <div class="flex flex-wrap gap-4">
                        <button id="exportSalesReportBtn" class="bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-file-export"></i>
                            <span>‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</span>
                        </button>
                        <button id="printSalesReportBtn" class="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-print"></i>
                            <span>‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</span>
                        </button>
                        <button id="viewReceiptBtn" class="bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-receipt"></i>
                            <span>‡∏î‡∏π‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Users Management Page -->
            <div id="usersPage" class="page-content hidden">
                <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
                    <div>
                        <h2 class="text-2xl font-bold flex items-center">
                            <i class="fas fa-users mr-2 text-indigo-400"></i> ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
                        </h2>
                        <p class="text-gray-400 text-sm mt-1">‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏•‡∏ö ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p>
                    </div>
                    <div class="mt-4 md:mt-0 flex space-x-2">
                        <button id="addUserBtn" class="bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-user-plus"></i>
                            <span>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà</span>
                        </button>
                        <button id="refreshUsersBtn" class="bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 text-white font-bold py-2 px-4 rounded-lg flex items-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-sync-alt"></i>
                            <span>‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä</span>
                        </button>
                    </div>
                </div>
                
                <!-- Users Table -->
                <div class="bg-gray-800 rounded-xl shadow-lg overflow-hidden mb-8">
                    <div class="p-6 border-b border-gray-700">
                        <div class="flex flex-col md:flex-row justify-between items-start md:items-center">
                            <div>
                                <h3 class="text-lg font-bold">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
                                <p class="text-gray-400 text-sm mt-1">‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</p>
                            </div>
                            <div class="mt-3 md:mt-0">
                                <div class="flex items-center space-x-2">
                                    <div class="relative">
                                        <input type="text" id="userSearch" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ..." class="bg-gray-700 border border-gray-600 rounded-lg pl-10 pr-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent w-64">
                                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-4">
                        <table id="usersTable" class="min-w-full divide-y divide-gray-700">
                            <thead>
                                <tr class="bg-gray-900">
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider">‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</th>
                                </tr>
                            </thead>
                            <tbody id="usersTableBody" class="divide-y divide-gray-700">
                                <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÇ‡∏î‡∏¢ JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- User Statistics -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-gradient-to-r from-indigo-800 to-purple-800 rounded-xl p-6 shadow-lg">
                        <div class="flex items-center">
                            <div class="mr-4">
                                <i class="fas fa-users text-3xl text-white"></i>
                            </div>
                            <div>
                                <p class="text-gray-300 text-sm">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                                <p id="totalUsersCount" class="text-2xl font-bold">0 ‡∏Ñ‡∏ô</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-blue-800 to-cyan-800 rounded-xl p-6 shadow-lg">
                        <div class="flex items-center">
                            <div class="mr-4">
                                <i class="fas fa-user-shield text-3xl text-white"></i>
                            </div>
                            <div>
                                <p class="text-gray-300 text-sm">‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</p>
                                <p id="adminUsersCount" class="text-2xl font-bold">0 ‡∏Ñ‡∏ô</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-green-800 to-emerald-800 rounded-xl p-6 shadow-lg">
                        <div class="flex items-center">
                            <div class="mr-4">
                                <i class="fas fa-user text-3xl text-white"></i>
                            </div>
                            <div>
                                <p class="text-gray-300 text-sm">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</p>
                                <p id="normalUsersCount" class="text-2xl font-bold">0 ‡∏Ñ‡∏ô</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-r from-yellow-800 to-orange-800 rounded-xl p-6 shadow-lg">
                        <div class="flex items-center">
                            <div class="mr-4">
                                <i class="fas fa-user-tie text-3xl text-white"></i>
                            </div>
                            <div>
                                <p class="text-gray-300 text-sm">‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</p>
                                <p id="managerUsersCount" class="text-2xl font-bold">0 ‡∏Ñ‡∏ô</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Page -->
            <div id="settingsPage" class="page-content hidden">
                <div class="mb-8">
                    <h2 class="text-2xl font-bold flex items-center">
                        <i class="fas fa-cog mr-2 text-indigo-400"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö
                    </h2>
                    <p class="text-gray-400 text-sm mt-1">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô</p>
                </div>
                
                <!-- System Settings -->
                <div class="bg-gray-800 rounded-xl p-6 shadow-lg mb-8">
                    <h3 class="text-lg font-bold mb-4">‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 bg-gray-900/50 rounded-lg">
                            <div>
                                <p class="font-medium">‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</p>
                                <p class="text-gray-400 text-sm">‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="notificationToggle" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        
                        <div class="flex items-center justify-between p-4 bg-gray-900/50 rounded-lg">
                            <div>
                                <p class="font-medium">‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î</p>
                                <p class="text-gray-400 text-sm">‡πÉ‡∏ä‡πâ‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡∏°‡∏∑‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="darkModeToggle" class="sr-only peer" checked>
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                        
                        <div class="flex items-center justify-between p-4 bg-gray-900/50 rounded-lg">
                            <div>
                                <p class="font-medium">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</p>
                                <p class="text-gray-400 text-sm">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ó‡∏∏‡∏Å 30 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</p>
                            </div>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="autoRefreshToggle" class="sr-only peer">
                                <div class="w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Database Management -->
                <div class="bg-gray-800 rounded-xl p-6 shadow-lg mb-8">
                    <h3 class="text-lg font-bold mb-4">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <button id="backupDataBtn" class="bg-gradient-to-r from-blue-600 to-cyan-600 hover:from-blue-700 hover:to-cyan-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-database"></i>
                            <span>‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
                        </button>
                        <button id="resetDemoDataBtn" class="bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center space-x-2 btn-glow transition-all duration-300 hover-effect">
                            <i class="fas fa-redo"></i>
                            <span>‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</span>
                        </button>
                    </div>
                </div>
                
                <!-- System Information -->
                <div class="bg-gray-800 rounded-xl p-6 shadow-lg">
                    <h3 class="text-lg font-bold mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h3>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center p-3 bg-gray-900/30 rounded-lg">
                            <span class="text-gray-400">‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</span>
                            <span class="font-medium">5.0.0</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-900/30 rounded-lg">
                            <span class="text-gray-400">‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
                            <span class="font-medium">Firebase Realtime Database</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-900/30 rounded-lg">
                            <span class="text-gray-400">‡∏ú‡∏π‡πâ‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</span>
                            <span class="font-medium">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-900/30 rounded-lg">
                            <span class="text-gray-400">‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠</span>
                            <span id="systemConnectionStatus" class="font-medium text-green-400">‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</span>
                        </div>
                        <div class="flex justify-between items-center p-3 bg-gray-900/30 rounded-lg">
                            <span class="text-gray-400">‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô</span>
                            <span id="systemTime" class="font-medium">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-gray-800 border-t border-gray-700 py-6 mt-8">
            <div class="container mx-auto px-4">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="mb-4 md:mb-0">
                        <p class="text-gray-400">
                            <i class="fas fa-cube mr-1"></i> ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ Firebase
                        </p>
                        <p class="text-gray-500 text-sm mt-1">‡∏Ñ‡∏£‡∏ö‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏≠‡∏ó‡∏µ</p>
                    </div>
                    <div class="flex space-x-4">
                        <a href="https://firebase.google.com/" target="_blank" class="text-gray-400 hover:text-indigo-400 transition-colors hover-effect">
                            <i class="fab fa-google"></i> Firebase
                        </a>
                        <a href="https://tailwindcss.com/" target="_blank" class="text-gray-400 hover:text-blue-400 transition-colors hover-effect">
                            <i class="fab fa-css3-alt"></i> Tailwind CSS
                        </a>
                        <a href="https://datatables.net/" target="_blank" class="text-gray-400 hover:text-orange-400 transition-colors hover-effect">
                            <i class="fas fa-table"></i> DataTables
                        </a>
                    </div>
                </div>
            </div>
        </footer>
    </div>

    <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ -->
    <div id="productModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-800 rounded-xl shadow-2xl w-full max-w-md mx-4 animate__animated animate__zoomIn">
            <div class="p-6 border-b border-gray-700">
                <h3 id="modalProductTitle" class="text-xl font-bold">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà</h3>
            </div>
            
            <form id="productForm" class="p-6">
                <input type="hidden" id="productId">
                
                <div class="space-y-4">
                    <div>
                        <label for="productCode" class="block text-sm font-medium text-gray-300 mb-1">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ *</label>
                        <input type="text" id="productCode" required class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                    </div>
                    
                    <div>
                        <label for="productName" class="block text-sm font-medium text-gray-300 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ *</label>
                        <input type="text" id="productName" required class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                    </div>
                    
                    <div>
                        <label for="productCategory" class="block text-sm font-medium text-gray-300 mb-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó *</label>
                        <select id="productCategory" required class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</option>
                            <option value="‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå">‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå</option>
                            <option value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô</option>
                            <option value="‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå">‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå</option>
                            <option value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</option>
                            <option value="‡∏≠‡∏≤‡∏´‡∏≤‡∏£">‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
                            <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                        </select>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="productQuantity" class="block text-sm font-medium text-gray-300 mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô *</label>
                            <input type="number" id="productQuantity" required min="0" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                        </div>
                        
                        <div>
                            <label for="productPrice" class="block text-sm font-medium text-gray-300 mb-1">‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢ *</label>
                            <input type="number" id="productPrice" required min="0" step="0.01" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                        </div>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 mt-8">
                    <button type="button" id="cancelProductModalBtn" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors hover-effect">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" id="saveProductBtn" class="px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 rounded-lg transition-colors hover-effect">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ -->
    <div id="userModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-800 rounded-xl shadow-2xl w-full max-w-md mx-4 animate__animated animate__zoomIn">
            <div class="p-6 border-b border-gray-700">
                <h3 id="modalUserTitle" class="text-xl font-bold">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà</h3>
            </div>
            
            <form id="userForm" class="p-6">
                <input type="hidden" id="userId">
                
                <div class="space-y-4">
                    <div>
                        <label for="newUsername" class="block text-sm font-medium text-gray-300 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ *</label>
                        <input type="text" id="newUsername" required class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                    </div>
                    
                    <div>
                        <label for="newPassword" class="block text-sm font-medium text-gray-300 mb-1">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô *</label>
                        <input type="password" id="newPassword" required class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                    </div>
                    
                    <div>
                        <label for="fullName" class="block text-sm font-medium text-gray-300 mb-1">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label>
                        <input type="text" id="fullName" required class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                    </div>
                    
                    <div>
                        <label for="userRole" class="block text-sm font-medium text-gray-300 mb-1">‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó *</label>
                        <select id="userRole" required class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                            <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</option>
                            <option value="user">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
                            <option value="manager">‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</option>
                            <option value="admin">‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö</option>
                        </select>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 mt-8">
                    <button type="button" id="cancelUserModalBtn" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors hover-effect">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" id="saveUserBtn" class="px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 rounded-lg transition-colors hover-effect">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à -->
    <div id="receiptModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-800 rounded-xl shadow-2xl w-full max-w-md mx-4 animate__animated animate__zoomIn">
            <div class="p-6 border-b border-gray-700">
                <h3 class="text-xl font-bold">‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</h3>
            </div>
            
            <div class="p-6">
                <div id="receiptContent" class="receipt bg-white text-black p-6 rounded-lg print-section">
                    <div class="text-center mb-4">
                        <h2 class="text-xl font-bold">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</h2>
                        <p class="text-sm">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà: 123 ‡∏ñ‡∏ô‡∏ô‡∏´‡∏•‡∏±‡∏Å ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</p>
                        <p class="text-sm">‡πÇ‡∏ó‡∏£: 012-345-6789</p>
                    </div>
                    
                    <div class="mb-4">
                        <div class="flex justify-between mb-2">
                            <span>‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à:</span>
                            <span id="receiptNumber" class="font-bold">S001</span>
                        </div>
                        <div class="flex justify-between mb-2">
                            <span>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</span>
                            <span id="receiptDate"></span>
                        </div>
                        <div class="flex justify-between mb-4">
                            <span>‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤:</span>
                            <span id="receiptCustomer">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</span>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <div class="receipt-line"></div>
                        <div class="flex justify-between font-bold mb-2">
                            <span>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
                            <span>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</span>
                            <span>‡∏£‡∏ß‡∏°</span>
                        </div>
                        <div class="receipt-line"></div>
                        <div id="receiptItems">
                            <!-- Items will be added here -->
                        </div>
                        <div class="receipt-line"></div>
                    </div>
                    
                    <div class="text-right">
                        <div class="flex justify-between mb-1">
                            <span>‡∏£‡∏ß‡∏°:</span>
                            <span id="receiptSubtotal">‡∏ø0.00</span>
                        </div>
                        <div class="flex justify-between mb-1">
                            <span>‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î:</span>
                            <span id="receiptDiscount">‡∏ø0.00</span>
                        </div>
                        <div class="flex justify-between font-bold text-lg mb-4">
                            <span>‡∏£‡∏ß‡∏°‡∏™‡∏∏‡∏ó‡∏ò‡∏¥:</span>
                            <span id="receiptTotal">‡∏ø0.00</span>
                        </div>
                        <div class="flex justify-between mb-1">
                            <span>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô:</span>
                            <span id="receiptPaymentMethod">‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î</span>
                        </div>
                        
                        <!-- Bank Transfer Details -->
                        <div id="receiptBankTransfer" class="hidden mt-4 p-3 border border-gray-300 rounded">
                            <h4 class="font-bold mb-2">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</h4>
                            <div class="grid grid-cols-2 gap-2 text-sm">
                                <div>
                                    <p class="text-gray-600">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£:</p>
                                    <p id="receiptBankName" class="font-bold">‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢</p>
                                </div>
                                <div>
                                    <p class="text-gray-600">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</p>
                                    <p id="receiptBankAccount" class="font-bold">123-4-56789-0</p>
                                </div>
                                <div>
                                    <p class="text-gray-600">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</p>
                                    <p id="receiptBankAccountName" class="font-bold">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</p>
                                </div>
                                <div>
                                    <p class="text-gray-600">‡∏™‡∏≤‡∏Ç‡∏≤:</p>
                                    <p id="receiptBankBranch" class="font-bold">‡∏™‡∏≤‡∏Ç‡∏≤‡∏´‡∏•‡∏±‡∏Å</p>
                                </div>
                            </div>
                            <p class="text-sm text-gray-600 mt-2">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</p>
                        </div>
                    </div>
                    
                    <div class="text-center mt-6 pt-4 border-t border-dashed border-gray-400">
                        <p class="text-sm">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£</p>
                        <p class="text-xs">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏±‡∏ö</p>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 mt-8 no-print">
                    <button type="button" id="closeReceiptBtn" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors hover-effect">‡∏õ‡∏¥‡∏î</button>
                    <button type="button" id="printReceiptBtn" class="px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-lg transition-colors hover-effect">
                        <i class="fas fa-print mr-2"></i> ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏î‡πà‡∏ß‡∏ô -->
    <div id="quickProductModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-800 rounded-xl shadow-2xl w-full max-w-md mx-4 animate__animated animate__zoomIn">
            <div class="p-6 border-b border-gray-700">
                <h3 class="text-xl font-bold">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡πá‡∏ß</h3>
            </div>
            
            <form id="quickProductForm" class="p-6">
                <div class="space-y-4">
                    <div>
                        <label for="quickProductName" class="block text-sm font-medium text-gray-300 mb-1">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ *</label>
                        <input type="text" id="quickProductName" required class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label for="quickProductPrice" class="block text-sm font-medium text-gray-300 mb-1">‡∏£‡∏≤‡∏Ñ‡∏≤ *</label>
                            <input type="number" id="quickProductPrice" required min="0" step="0.01" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                        </div>
                        
                        <div>
                            <label for="quickProductQuantity" class="block text-sm font-medium text-gray-300 mb-1">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô *</label>
                            <input type="number" id="quickProductQuantity" required min="1" value="1" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                        </div>
                    </div>
                    
                    <div>
                        <label for="quickProductCategory" class="block text-sm font-medium text-gray-300 mb-1">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</label>
                        <select id="quickProductCategory" class="w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-300">
                            <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                            <option value="‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå">‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå</option>
                            <option value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô</option>
                            <option value="‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå">‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå</option>
                            <option value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°</option>
                            <option value="‡∏≠‡∏≤‡∏´‡∏≤‡∏£">‡∏≠‡∏≤‡∏´‡∏≤‡∏£</option>
                        </select>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 mt-8">
                    <button type="button" id="cancelQuickProductBtn" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors hover-effect">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="submit" id="saveQuickProductBtn" class="px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 rounded-lg transition-colors hover-effect">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö QR Code Payment -->
    <div id="qrPaymentModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-800 rounded-xl shadow-2xl w-full max-w-md mx-4 animate__animated animate__zoomIn">
            <div class="p-6 border-b border-gray-700">
                <h3 class="text-xl font-bold">‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ QR Code</h3>
            </div>
            
            <div class="p-6">
                <div class="text-center mb-6">
                    <p class="text-gray-300 mb-4">‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏ú‡πà‡∏≤‡∏ô PromptPay</p>
                    <div id="qrcodeCanvas" class="qrcode-container mb-4">
                        <!-- QR Code will be generated here -->
                    </div>
                    <div class="countdown-timer" id="countdownTimer">01:00</div>
                    <p class="text-gray-400 text-sm">QR Code ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÉ‡∏ô <span id="countdownText">1 ‡∏ô‡∏≤‡∏ó‡∏µ</span></p>
                </div>
                
                <div class="space-y-4">
                    <div class="bg-gray-900/50 p-4 rounded-lg">
                        <div class="flex justify-between mb-2">
                            <span class="text-gray-400">‡∏¢‡∏≠‡∏î‡∏ä‡∏≥‡∏£‡∏∞:</span>
                            <span id="qrPaymentAmount" class="text-2xl font-bold text-green-400">‡∏ø0.00</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-400">‡∏£‡∏´‡∏±‡∏™‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á:</span>
                            <span id="qrPaymentRef" class="font-mono">REF-0000</span>
                        </div>
                        <div class="flex justify-between mt-2">
                            <span class="text-gray-400">PromptPay ID:</span>
                            <span class="font-mono font-bold">0857243350</span>
                        </div>
                    </div>
                    
                    <div class="bg-yellow-900/30 p-3 rounded-lg border border-yellow-700">
                        <p class="text-yellow-300 text-sm flex items-center">
                            <i class="fas fa-exclamation-circle mr-2"></i>
                            ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô 1 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏°‡∏¥‡∏â‡∏∞‡∏ô‡∏±‡πâ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                        </p>
                    </div>
                </div>
                
                <div class="flex justify-end space-x-3 mt-8">
                    <button type="button" id="cancelQrPaymentBtn" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors hover-effect">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                    <button type="button" id="confirmQrPaymentBtn" class="px-4 py-2 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded-lg transition-colors hover-effect">
                        <i class="fas fa-check-circle mr-2"></i> ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Dialog -->
    <div id="confirmationDialog" class="confirmation-dialog hidden">
        <div class="confirmation-header">
            <div id="confirmationIcon" class="confirmation-icon">
                <i class="fas fa-exclamation-triangle text-yellow-500"></i>
            </div>
            <h3 id="confirmationTitle" class="text-xl font-bold">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</h3>
        </div>
        <div class="confirmation-body">
            <p id="confirmationMessage" class="text-gray-300">‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ?</p>
        </div>
        <div class="confirmation-footer">
            <button id="cancelConfirmBtn" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors hover-effect">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
            <button id="confirmActionBtn" class="px-4 py-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700 rounded-lg transition-colors hover-effect">‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
        </div>
    </div>

    <!-- Notification Panel -->
    <div id="notificationPanel" class="fixed top-16 right-4 bg-gray-800 rounded-xl shadow-2xl w-80 max-h-96 overflow-y-auto z-50 hidden animate__animated animate__fadeInRight">
        <div class="p-4 border-b border-gray-700">
            <h3 class="font-bold flex items-center">
                <i class="fas fa-bell mr-2 text-yellow-400"></i> ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                <span id="notificationCount" class="ml-2 bg-red-500 text-white text-xs rounded-full px-2 py-1">0</span>
            </h3>
        </div>
        <div id="notificationList" class="p-2">
            <!-- Notifications will be added here -->
            <div class="text-center py-8 text-gray-500">
                <i class="fas fa-bell-slash text-2xl mb-2"></i>
                <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà</p>
            </div>
        </div>
        <div class="p-3 border-t border-gray-700">
            <button id="clearNotificationsBtn" class="w-full py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm transition-colors hover-effect">
                <i class="fas fa-trash-alt mr-2"></i> ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
            </button>
        </div>
    </div>

    <!-- User Profile Modal -->
    <div id="userProfileModal" class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="bg-gray-800 rounded-xl shadow-2xl w-full max-w-md mx-4 animate__animated animate__zoomIn">
            <div class="p-6 border-b border-gray-700">
                <h3 class="text-xl font-bold">‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</h3>
            </div>
            
            <div class="p-6">
                <div class="text-center mb-6">
                    <div class="w-20 h-20 bg-indigo-600 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-user text-white text-3xl"></i>
                    </div>
                    <h4 id="profileUsername" class="text-xl font-bold"></h4>
                    <div id="profileRoleBadge" class="inline-block mt-2"></div>
                </div>
                
                <div class="space-y-4">
                    <div>
                        <p class="text-gray-400 text-sm">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</p>
                        <p id="profileFullName" class="font-medium">-</p>
                    </div>
                    
                    <div>
                        <p class="text-gray-400 text-sm">‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó</p>
                        <p id="profileRole" class="font-medium">-</p>
                    </div>
                    
                    <div>
                        <p class="text-gray-400 text-sm">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</p>
                        <p id="profileEmail" class="font-medium">-</p>
                    </div>
                    
                    <div>
                        <p class="text-gray-400 text-sm">‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</p>
                        <p id="profileLastLogin" class="font-medium">-</p>
                    </div>
                    
                    <div>
                        <p class="text-gray-400 text-sm">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏±‡∏Ñ‡∏£</p>
                        <p id="profileCreatedAt" class="font-medium">-</p>
                    </div>
                </div>
                
                <div class="mt-8 pt-6 border-t border-gray-700">
                    <div class="grid grid-cols-2 gap-3">
                        <button id="changePasswordBtn" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-lg transition-colors hover-effect">
                            <i class="fas fa-key mr-2"></i> ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô
                        </button>
                        <button id="closeProfileBtn" class="px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 rounded-lg transition-colors hover-effect">
                            <i class="fas fa-times mr-2"></i> ‡∏õ‡∏¥‡∏î
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Print Report Section (Hidden until printing) -->
    <div id="printReportSection" class="print-section hidden">
        <div class="p-8">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢</h1>
                <p class="text-gray-600">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏°‡∏û‡πå: <span id="printDate"></span></p>
                <p class="text-gray-600">‡∏û‡∏¥‡∏°‡∏û‡πå‡πÇ‡∏î‡∏¢: <span id="printUser"></span></p>
            </div>
            
            <div class="mb-8">
                <h2 class="text-xl font-bold mb-4">‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
                <div id="printProductSummary"></div>
            </div>
            
            <div class="mb-8">
                <h2 class="text-xl font-bold mb-4">‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</h2>
                <div id="printSalesSummary"></div>
            </div>
            
            <div class="mb-8">
                <h2 class="text-xl font-bold mb-4">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
                <div id="printProductsTable"></div>
            </div>
            
            <div class="mt-12 pt-8 border-t border-gray-300">
                <p class="text-gray-600 text-sm text-center">
                    ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ Firebase | ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô 5.0.0
                </p>
            </div>
        </div>
    </div>

    <!-- Firebase Configuration Script -->
    <script id="firebaseConfigScript">
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyAc9BtiDc0pOeX4uJpIOYLBTZ9DM6MkFCM",
            authDomain: "inventory-c74e1.firebaseapp.com",
            databaseURL: "https://inventory-c74e1-default-rtdb.firebaseio.com",
            projectId: "inventory-c74e1",
            storageBucket: "inventory-c74e1.firebasestorage.app",
            messagingSenderId: "95313330186",
            appId: "1:95313330186:web:b8b5b675a8e829e76bdff3",
            measurementId: "G-Y069B1FRNC"
        };
        
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        console.log("Firebase initialized successfully!");
    </script>

    <!-- Main Application Script -->
    <script>
        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏û‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô
        let products = [];
        let users = [];
        let sales = [];
        let currentUser = null;
        let userToDelete = null;
        let productToDelete = null;
        let saleToDelete = null;
        let notifications = [];
        let recentActivities = [];
        let autoRefreshInterval = null;
        
        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢
        let cart = [];
        let saleCounter = 1; // ‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
        
        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        let notificationCounter = 0;
        let notificationInterval = null;
        
        // ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö QR Code Payment
        let qrPaymentTimer = null;
        let qrPaymentTimeLeft = 60; // 1 ‡∏ô‡∏≤‡∏ó‡∏µ = 60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
        let qrPaymentActive = false;
        let qrPaymentRef = '';
        
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
        const bankAccount = {
            bankName: "‡∏Å‡∏£‡∏∏‡∏á‡πÑ‡∏ó‡∏¢",
            accountNumber: "123-4-56789-0",
            accountName: "‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ",
            branch: "‡∏™‡∏≤‡∏Ç‡∏≤‡∏´‡∏•‡∏±‡∏Å"
        };
        
        // PromptPay ID ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á QR Code
        const promptpayId = "0857243350";
        
        // ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó
        const rolePermissions = {
            'admin': {
                canView: true,
                canAdd: true,
                canEdit: true,
                canDelete: true,
                canManageUsers: true,
                canViewReports: true,
                canManageSettings: true,
                canSell: true,
                canViewSales: true
            },
            'manager': {
                canView: true,
                canAdd: true,
                canEdit: true,
                canDelete: false,
                canManageUsers: false,
                canViewReports: true,
                canManageSettings: false,
                canSell: true,
                canViewSales: true
            },
            'user': {
                canView: true,
                canAdd: true,
                canEdit: true,
                canDelete: false,
                canManageUsers: false,
                canViewReports: false,
                canManageSettings: false,
                canSell: true,
                canViewSales: false
            }
        };
        
        // DOM Elements
        const loginPage = document.getElementById('loginPage');
        const appContainer = document.getElementById('appContainer');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const notificationPanel = document.getElementById('notificationPanel');
        
        // ==================== ALERT SYSTEM ====================
        
        // ‡πÅ‡∏™‡∏î‡∏á Alert ‡πÅ‡∏ö‡∏ö‡∏ï‡πà‡∏≤‡∏á ‡πÜ
        function showAlert(type, title, message, duration = 5000) {
            const alertContainer = document.getElementById('alertContainer');
            const alertId = 'alert-' + Date.now();
            
            let icon = 'info-circle';
            let alertClass = 'alert-info';
            
            switch(type) {
                case 'success':
                    icon = 'check-circle';
                    alertClass = 'alert-success';
                    break;
                case 'error':
                    icon = 'exclamation-circle';
                    alertClass = 'alert-error';
                    break;
                case 'warning':
                    icon = 'exclamation-triangle';
                    alertClass = 'alert-warning';
                    break;
                case 'info':
                    icon = 'info-circle';
                    alertClass = 'alert-info';
                    break;
            }
            
            const alertElement = document.createElement('div');
            alertElement.id = alertId;
            alertElement.className = `alert ${alertClass}`;
            alertElement.innerHTML = `
                <div class="alert-icon">
                    <i class="fas fa-${icon}"></i>
                </div>
                <div class="alert-content">
                    <div class="alert-title">${title}</div>
                    <div class="alert-message">${message}</div>
                </div>
                <button class="alert-close" onclick="closeAlert('${alertId}')">
                    <i class="fas fa-times"></i>
                </button>
            `;
            
            alertContainer.appendChild(alertElement);
            
            setTimeout(() => {
                alertElement.classList.add('show');
            }, 10);
            
            if (duration > 0) {
                setTimeout(() => {
                    closeAlert(alertId);
                }, duration);
            }
            
            return alertId;
        }
        
        // ‡∏õ‡∏¥‡∏î Alert
        function closeAlert(alertId) {
            const alertElement = document.getElementById(alertId);
            if (alertElement) {
                alertElement.classList.remove('show');
                setTimeout(() => {
                    if (alertElement.parentNode) {
                        alertElement.parentNode.removeChild(alertElement);
                    }
                }, 500);
            }
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á Toast Notification
        function showToast(message, type = 'info') {
            const toastContainer = document.getElementById('toastContainer');
            const toastId = 'toast-' + Date.now();
            
            let icon = 'info-circle';
            let borderColor = '#3b82f6';
            
            switch(type) {
                case 'success':
                    icon = 'check-circle';
                    borderColor = '#10b981';
                    break;
                case 'error':
                    icon = 'exclamation-circle';
                    borderColor = '#ef4444';
                    break;
                case 'warning':
                    icon = 'exclamation-triangle';
                    borderColor = '#f59e0b';
                    break;
            }
            
            const toastElement = document.createElement('div');
            toastElement.id = toastId;
            toastElement.className = 'toast';
            toastElement.style.borderLeftColor = borderColor;
            toastElement.innerHTML = `
                <div class="flex items-center">
                    <i class="fas fa-${icon} mr-3"></i>
                    <span>${message}</span>
                </div>
            `;
            
            toastContainer.appendChild(toastElement);
            
            setTimeout(() => {
                toastElement.classList.add('show');
            }, 10);
            
            setTimeout(() => {
                toastElement.classList.remove('show');
                setTimeout(() => {
                    if (toastElement.parentNode) {
                        toastElement.parentNode.removeChild(toastElement);
                    }
                }, 500);
            }, 3000);
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á Confirmation Dialog
        function showConfirmation(title, message, icon = 'warning', confirmText = '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô', cancelText = '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å') {
            return new Promise((resolve) => {
                const dialog = document.getElementById('confirmationDialog');
                const dialogIcon = document.getElementById('confirmationIcon');
                const dialogTitle = document.getElementById('confirmationTitle');
                const dialogMessage = document.getElementById('confirmationMessage');
                const confirmBtn = document.getElementById('confirmActionBtn');
                const cancelBtn = document.getElementById('cancelConfirmBtn');
                
                dialogTitle.textContent = title;
                dialogMessage.textContent = message;
                confirmBtn.textContent = confirmText;
                cancelBtn.textContent = cancelText;
                
                let iconClass = 'exclamation-triangle text-yellow-500';
                switch(icon) {
                    case 'success':
                        iconClass = 'check-circle text-green-500';
                        break;
                    case 'error':
                        iconClass = 'times-circle text-red-500';
                        break;
                    case 'info':
                        iconClass = 'info-circle text-blue-500';
                        break;
                    case 'question':
                        iconClass = 'question-circle text-purple-500';
                        break;
                }
                dialogIcon.innerHTML = `<i class="fas ${iconClass}"></i>`;
                
                dialog.classList.remove('hidden');
                setTimeout(() => {
                    dialog.classList.add('show');
                }, 10);
                
                const handleConfirm = () => {
                    cleanup();
                    resolve(true);
                };
                
                const handleCancel = () => {
                    cleanup();
                    resolve(false);
                };
                
                const handleKeydown = (e) => {
                    if (e.key === 'Escape') handleCancel();
                    if (e.key === 'Enter') handleConfirm();
                };
                
                const cleanup = () => {
                    dialog.classList.remove('show');
                    setTimeout(() => {
                        dialog.classList.add('hidden');
                    }, 300);
                    confirmBtn.removeEventListener('click', handleConfirm);
                    cancelBtn.removeEventListener('click', handleCancel);
                    document.removeEventListener('keydown', handleKeydown);
                };
                
                confirmBtn.addEventListener('click', handleConfirm);
                cancelBtn.addEventListener('click', handleCancel);
                document.addEventListener('keydown', handleKeydown);
            });
        }
        
        // ==================== NOTIFICATION SYSTEM ====================
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà
        function addNotification(title, message, type = 'info') {
            notificationCounter++;
            
            const notification = {
                id: Date.now(),
                title: title,
                message: message,
                type: type,
                timestamp: new Date().toISOString(),
                read: false
            };
            
            notifications.unshift(notification); // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏ô array
            updateNotificationBadge();
            updateNotificationPanel();
            
            // ‡πÅ‡∏™‡∏î‡∏á alert ‡∏ñ‡πâ‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            if (document.getElementById('notificationToggle')?.checked) {
                showAlert(type, title, message);
            }
            
            return notification.id;
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó badge ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
        function updateNotificationBadge() {
            const badge = document.getElementById('notificationBadge');
            const unreadCount = notifications.filter(n => !n.read).length;
            
            if (badge) {
                if (unreadCount > 0) {
                    badge.textContent = unreadCount;
                    badge.classList.remove('hidden');
                } else {
                    badge.classList.add('hidden');
                }
            }
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ô panel ‡∏î‡πâ‡∏ß‡∏¢
            const notificationCountElement = document.getElementById('notificationCount');
            if (notificationCountElement) {
                notificationCountElement.textContent = unreadCount;
            }
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Notification Panel
        function updateNotificationPanel() {
            const notificationList = document.getElementById('notificationList');
            if (!notificationList) return;
            
            notificationList.innerHTML = '';
            
            if (notifications.length === 0) {
                notificationList.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-bell-slash text-2xl mb-2"></i>
                        <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÉ‡∏´‡∏°‡πà</p>
                    </div>
                `;
                return;
            }
            
            notifications.forEach(notification => {
                const notificationElement = document.createElement('div');
                notificationElement.className = `p-3 border-b border-gray-700 cursor-pointer hover:bg-gray-700 ${notification.read ? '' : 'bg-gray-900/50'}`;
                notificationElement.onclick = () => markNotificationAsRead(notification.id);
                
                let icon = 'info-circle';
                let iconColor = 'text-blue-400';
                
                switch(notification.type) {
                    case 'success':
                        icon = 'check-circle';
                        iconColor = 'text-green-400';
                        break;
                    case 'error':
                        icon = 'exclamation-circle';
                        iconColor = 'text-red-400';
                        break;
                    case 'warning':
                        icon = 'exclamation-triangle';
                        iconColor = 'text-yellow-400';
                        break;
                }
                
                const timeAgo = getTimeAgo(notification.timestamp);
                
                notificationElement.innerHTML = `
                    <div class="flex items-start">
                        <div class="mr-3 mt-1">
                            <i class="fas fa-${icon} ${iconColor}"></i>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium">${notification.title}</div>
                            <div class="text-gray-400 text-sm mt-1">${notification.message}</div>
                            <div class="text-gray-500 text-xs mt-2">${timeAgo}</div>
                        </div>
                        ${!notification.read ? '<div class="w-2 h-2 bg-blue-500 rounded-full mt-2"></div>' : ''}
                    </div>
                `;
                
                notificationList.appendChild(notificationElement);
            });
        }
        
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏• (‡πÄ‡∏ä‡πà‡∏ô "2 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß")
        function getTimeAgo(timestamp) {
            const now = new Date();
            const past = new Date(timestamp);
            const diffMs = now - past;
            const diffSec = Math.floor(diffMs / 1000);
            const diffMin = Math.floor(diffSec / 60);
            const diffHour = Math.floor(diffMin / 60);
            const diffDay = Math.floor(diffHour / 24);
            
            if (diffSec < 60) return '‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà';
            if (diffMin < 60) return `${diffMin} ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß`;
            if (diffHour < 24) return `${diffHour} ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß`;
            return `${diffDay} ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß`;
        }
        
        // ‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß
        function markNotificationAsRead(notificationId) {
            const notification = notifications.find(n => n.id === notificationId);
            if (notification) {
                notification.read = true;
                updateNotificationBadge();
                updateNotificationPanel();
            }
        }
        
        // ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        function clearAllNotifications() {
            notifications = [];
            updateNotificationBadge();
            updateNotificationPanel();
            showToast('‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß', 'success');
        }
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö)
        function createSampleNotifications() {
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
            addNotification('‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö', `‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ${currentUser.username} ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö!`, 'success');
            
            // ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î
            const lowStockProducts = products.filter(p => p.quantity > 0 && p.quantity <= 5);
            if (lowStockProducts.length > 0) {
                addNotification('‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î', `‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å ${lowStockProducts.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`, 'warning');
            }
            
            // ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î
            const outOfStockProducts = products.filter(p => p.quantity <= 0);
            if (outOfStockProducts.length > 0) {
                addNotification('‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å', `‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å ${outOfStockProducts.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`, 'error');
            }
        }
        
        // ==================== QR CODE PAYMENT SYSTEM ====================
        
        // ‡πÅ‡∏™‡∏î‡∏á QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
        function showQRCodePayment() {
            if (cart.length === 0) {
                showAlert('error', '‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á QR Code');
                return;
            }
            
            const subtotal = cart.reduce((sum, item) => sum + item.total, 0);
            const discount = parseFloat(document.getElementById('discountAmount').value) || 0;
            const totalAmount = subtotal - discount;
            
            if (totalAmount <= 0) {
                showAlert('error', '‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', '‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0 ‡∏ö‡∏≤‡∏ó');
                return;
            }
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á
            qrPaymentRef = `QR-${Date.now().toString().slice(-6)}`;
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ UI
            document.getElementById('qrPaymentAmount').textContent = '‡∏ø' + totalAmount.toLocaleString('th-TH', {minimumFractionDigits: 2});
            document.getElementById('qrPaymentRef').textContent = qrPaymentRef;
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö QR Code (PromptPay)
            const promptpayAmount = totalAmount.toFixed(2);
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á QR Code
            const qrContainer = document.getElementById('qrcodeCanvas');
            qrContainer.innerHTML = '';
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Ñ‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö PromptPay
            const promptpayUrl = `https://promptpay.io/${promptpayId}/${promptpayAmount}.png`;
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á img element ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö QR Code
            const img = document.createElement('img');
            img.src = promptpayUrl;
            img.alt = `QR Code for ${promptpayAmount} THB`;
            img.width = 200;
            img.height = 200;
            img.className = 'mx-auto border-2 border-gray-300 rounded';
            
            qrContainer.appendChild(img);
            
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á
            startQRPaymentTimer();
            
            // ‡πÅ‡∏™‡∏î‡∏á Modal
            const modal = document.getElementById('qrPaymentModal');
            modal.classList.remove('hidden');
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏õ‡πá‡∏ô QR Payment
            document.getElementById('paymentMethod').value = 'QR Payment';
        }
        
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö QR Payment
        function startQRPaymentTimer() {
            qrPaymentTimeLeft = 60; // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏õ‡πá‡∏ô 1 ‡∏ô‡∏≤‡∏ó‡∏µ
            qrPaymentActive = true;
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó UI
            updateQRPaymentTimer();
            
            // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á
            if (qrPaymentTimer) {
                clearInterval(qrPaymentTimer);
            }
            
            qrPaymentTimer = setInterval(() => {
                qrPaymentTimeLeft--;
                updateQRPaymentTimer();
                
                if (qrPaymentTimeLeft <= 0) {
                    clearInterval(qrPaymentTimer);
                    qrPaymentExpired();
                }
            }, 1000);
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏ñ‡∏≠‡∏¢‡∏´‡∏•‡∏±‡∏á QR Payment
        function updateQRPaymentTimer() {
            const minutes = Math.floor(qrPaymentTimeLeft / 60);
            const seconds = qrPaymentTimeLeft % 60;
            
            const timerElement = document.getElementById('countdownTimer');
            const textElement = document.getElementById('countdownText');
            
            if (timerElement) {
                timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤
                if (qrPaymentTimeLeft <= 10) {
                    timerElement.classList.add('text-red-500');
                    timerElement.classList.remove('text-yellow-500');
                } else if (qrPaymentTimeLeft <= 30) {
                    timerElement.classList.add('text-yellow-500');
                    timerElement.classList.remove('text-red-500', 'text-green-400');
                } else {
                    timerElement.classList.add('text-green-400');
                    timerElement.classList.remove('text-red-500', 'text-yellow-500');
                }
            }
            
            if (textElement) {
                textElement.textContent = `${qrPaymentTimeLeft} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
            }
        }
        
        // ‡πÄ‡∏°‡∏∑‡πà‡∏≠ QR Payment ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏
        function qrPaymentExpired() {
            qrPaymentActive = false;
            
            // ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            showAlert('error', 'QR Code ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏', 'QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà');
            
            // ‡∏ã‡πà‡∏≠‡∏ô Modal
            document.getElementById('qrPaymentModal').classList.add('hidden');
            
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
            document.getElementById('paymentMethod').value = '‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î';
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            addNotification('QR Code ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏', `QR Code ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á ${qrPaymentRef} ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß`, 'error');
        }
        
        // ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ QR Code
        function confirmQRPayment() {
            if (!qrPaymentActive) {
                showAlert('error', 'QR Code ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏', 'QR Code ‡∏ô‡∏µ‡πâ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà');
                return;
            }
            
            clearInterval(qrPaymentTimer);
            qrPaymentActive = false;
            
            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏Ç‡∏≤‡∏¢
            const customerName = document.getElementById('customerName').value.trim() || '‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
            const paymentMethod = 'QR Payment';
            const discount = parseFloat(document.getElementById('discountAmount').value) || 0;
            
            const subtotal = cart.reduce((sum, item) => sum + item.total, 0);
            const totalAmount = subtotal - discount;
            
            // ‡∏õ‡∏¥‡∏î Modal QR Code
            document.getElementById('qrPaymentModal').classList.add('hidden');
            
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
            processSale(customerName, paymentMethod, discount, totalAmount);
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
            addNotification('‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', `‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ QR Code ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á ${qrPaymentRef} ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß`, 'success');
        }
        
        // ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å QR Payment
        function cancelQRPayment() {
            if (qrPaymentTimer) {
                clearInterval(qrPaymentTimer);
            }
            qrPaymentActive = false;
            
            // ‡∏ã‡πà‡∏≠‡∏ô Modal
            document.getElementById('qrPaymentModal').classList.add('hidden');
            
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
            document.getElementById('paymentMethod').value = '‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î';
            
            showToast('‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢ QR Code ‡πÅ‡∏•‡πâ‡∏ß', 'info');
        }
        
        // ==================== EXPORT FUNCTIONS ====================
        
        // ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô CSV
        function exportProducts() {
            if (products.length === 0) {
                showAlert('warning', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å');
                return;
            }
            
            showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å...');
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏±‡∏ß‡∏ï‡∏≤‡∏£‡∏≤‡∏á CSV
            let csvContent = "‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤,‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤,‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó,‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠,‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏´‡∏ô‡πà‡∏ß‡∏¢,‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏ß‡∏°,‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞,‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á\n";
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            products.forEach(product => {
                const totalValue = product.quantity * product.price;
                const isLowStock = product.quantity <= 5 && product.quantity > 0;
                const isOutOfStock = product.quantity <= 0;
                
                let status = '‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢';
                if (isLowStock) status = '‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢';
                if (isOutOfStock) status = '‡∏´‡∏°‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å';
                
                const createdDate = product.createdAt ? new Date(product.createdAt).toLocaleDateString('th-TH') : '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
                
                csvContent += `"${product.productCode}","${product.productName}","${product.category}",${product.quantity},${product.price},${totalValue},"${status}","${createdDate}"\n`;
            });
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå CSV
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            const url = URL.createObjectURL(blob);
            
            link.setAttribute("href", url);
            link.setAttribute("download", `‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤_${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            hideLoading();
            showAlert('success', '‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå CSV ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            addNotification('‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå CSV ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
        }
        
        // ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
        function exportSalesReport() {
            const startDate = document.getElementById('reportStartDate').value;
            const endDate = document.getElementById('reportEndDate').value;
            
            if (!startDate || !endDate) {
                showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î');
                return;
            }
            
            showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢...');
            
            // ‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
            const start = new Date(startDate);
            const end = new Date(endDate);
            end.setHours(23, 59, 59, 999);
            
            const filteredSales = sales.filter(sale => {
                const saleDate = new Date(sale.saleDate);
                return saleDate >= start && saleDate <= end;
            });
            
            if (filteredSales.length === 0) {
                hideLoading();
                showAlert('warning', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å');
                return;
            }
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå CSV ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
            let csvContent = "‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à,‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤,‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢,‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤,‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°,‡∏™‡πà‡∏ß‡∏ô‡∏•‡∏î,‡∏¢‡∏≠‡∏î‡∏™‡∏∏‡∏ó‡∏ò‡∏¥,‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô,‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢\n";
            
            filteredSales.forEach(sale => {
                const saleDate = new Date(sale.saleDate);
                const formattedDate = saleDate.toLocaleDateString('th-TH');
                
                csvContent += `"${sale.saleCode}","${sale.customerName}","${formattedDate}",${sale.items ? Object.keys(sale.items).length : 0},${sale.subtotal},${sale.discount},${sale.totalAmount},"${sale.paymentMethod}","${sale.seller}"\n`;
            });
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå CSV
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement("a");
            const url = URL.createObjectURL(blob);
            
            link.setAttribute("href", url);
            link.setAttribute("download", `‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢_${startDate}_‡∏ñ‡∏∂‡∏á_${endDate}.csv`);
            link.style.visibility = 'hidden';
            
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            hideLoading();
            showAlert('success', '‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå CSV ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
            addNotification('‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ü‡∏•‡πå CSV ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
        }
        
        // ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
        function printSalesReport() {
            const printSection = document.getElementById('printReportSection');
            const printDate = document.getElementById('printDate');
            const printUser = document.getElementById('printUser');
            const printProductSummary = document.getElementById('printProductSummary');
            const printSalesSummary = document.getElementById('printSalesSummary');
            const printProductsTable = document.getElementById('printProductsTable');
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
            const now = new Date();
            printDate.textContent = now.toLocaleDateString('th-TH', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            printUser.textContent = currentUser.username;
            
            // ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            const totalProducts = products.length;
            const totalValue = products.reduce((sum, product) => sum + (product.quantity * product.price), 0);
            const outOfStock = products.filter(p => p.quantity <= 0).length;
            const lowStock = products.filter(p => p.quantity > 0 && p.quantity <= 5).length;
            
            printProductSummary.innerHTML = `
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="border p-3">
                        <p class="font-bold">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                        <p class="text-xl">${totalProducts} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
                    </div>
                    <div class="border p-3">
                        <p class="font-bold">‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                        <p class="text-xl">‡∏ø${totalValue.toLocaleString('th-TH', {minimumFractionDigits: 2})}</p>
                    </div>
                    <div class="border p-3">
                        <p class="font-bold">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å</p>
                        <p class="text-xl">${outOfStock} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
                    </div>
                    <div class="border p-3">
                        <p class="font-bold">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î</p>
                        <p class="text-xl">${lowStock} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>
                    </div>
                </div>
            `;
            
            // ‡∏™‡∏£‡∏∏‡∏õ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
            const today = new Date().toISOString().split('T')[0];
            const todaySales = sales.filter(sale => {
                const saleDate = new Date(sale.saleDate).toISOString().split('T')[0];
                return saleDate === today;
            });
            
            const todayTotal = todaySales.reduce((sum, sale) => sum + sale.totalAmount, 0);
            const totalSales = sales.length;
            const totalSalesAmount = sales.reduce((sum, sale) => sum + sale.totalAmount, 0);
            
            printSalesSummary.innerHTML = `
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <div class="border p-3">
                        <p class="font-bold">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                        <p class="text-xl">‡∏ø${todayTotal.toLocaleString('th-TH', {minimumFractionDigits: 2})}</p>
                    </div>
                    <div class="border p-3">
                        <p class="font-bold">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                        <p class="text-xl">${todaySales.length} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
                    </div>
                    <div class="border p-3">
                        <p class="font-bold">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                        <p class="text-xl">‡∏ø${totalSalesAmount.toLocaleString('th-TH', {minimumFractionDigits: 2})}</p>
                    </div>
                    <div class="border p-3">
                        <p class="font-bold">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                        <p class="text-xl">${totalSales} ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
                    </div>
                </div>
            `;
            
            // ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            let productsTableHTML = `
                <table class="min-w-full border-collapse border border-gray-300">
                    <thead>
                        <tr class="bg-gray-100">
                            <th class="border p-2">‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th class="border p-2">‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                            <th class="border p-2">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                            <th class="border p-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                            <th class="border p-2">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                            <th class="border p-2">‡∏°‡∏π‡∏•‡∏Ñ‡πà‡∏≤‡∏£‡∏ß‡∏°</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            products.forEach(product => {
                const totalValue = product.quantity * product.price;
                productsTableHTML += `
                    <tr>
                        <td class="border p-2">${product.productCode}</td>
                        <td class="border p-2">${product.productName}</td>
                        <td class="border p-2">${product.category}</td>
                        <td class="border p-2 text-right">${product.quantity}</td>
                        <td class="border p-2 text-right">‡∏ø${product.price.toLocaleString('th-TH', {minimumFractionDigits: 2})}</td>
                        <td class="border p-2 text-right">‡∏ø${totalValue.toLocaleString('th-TH', {minimumFractionDigits: 2})}</td>
                    </tr>
                `;
            });
            
            productsTableHTML += `
                    </tbody>
                </table>
            `;
            
            printProductsTable.innerHTML = productsTableHTML;
            
            // ‡∏û‡∏¥‡∏°‡∏û‡πå
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢</title>
                    <style>
                        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; padding: 20px; color: #333; }
                        .header { text-align: center; margin-bottom: 30px; }
                        .section { margin-bottom: 30px; }
                        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
                        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
                        th { background-color: #f2f2f2; }
                        .footer { margin-top: 50px; text-align: center; font-size: 12px; color: #666; }
                        @media print {
                            body { padding: 0; }
                        }
                    </style>
                </head>
                <body>
                    ${printSection.innerHTML}
                    <script>
                        window.onload = function() {
                            window.print();
                            setTimeout(function() {
                                window.close();
                            }, 500);
                        };
                    <\/script>
                </body>
                </html>
            `);
            printWindow.document.close();
            
            showToast('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô...', 'info');
        }
        
        // ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        function backupData() {
            if (!checkPermission('canManageSettings')) {
                showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
                return;
            }
            
            showConfirmation(
                '‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö',
                '‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö? ‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
                'info',
                '‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
                '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
            ).then(confirmed => {
                if (confirmed) {
                    showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö...');
                    
                    // ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    const backupData = {
                        timestamp: new Date().toISOString(),
                        exportedBy: currentUser.username,
                        products: products,
                        users: users,
                        sales: sales,
                        statistics: {
                            totalProducts: products.length,
                            totalUsers: users.length,
                            totalSales: sales.length,
                            totalSalesAmount: sales.reduce((sum, sale) => sum + sale.totalAmount, 0)
                        }
                    };
                    
                    // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô JSON string
                    const jsonString = JSON.stringify(backupData, null, 2);
                    
                    // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå JSON
                    const blob = new Blob([jsonString], { type: 'application/json;charset=utf-8;' });
                    const link = document.createElement("a");
                    const url = URL.createObjectURL(blob);
                    
                    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
                    link.setAttribute("href", url);
                    link.setAttribute("download", `‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Ç‡∏≤‡∏¢_‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•_${timestamp}.json`);
                    link.style.visibility = 'hidden';
                    
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                    hideLoading();
                    showAlert('success', '‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                    addNotification('‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
                }
            });
        }
        
        // ==================== CORE FUNCTIONS ====================
        
        // ‡πÅ‡∏™‡∏î‡∏á/‡∏ã‡πà‡∏≠‡∏ô Loading Overlay
        function showLoading(message = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...') {
            loadingOverlay.classList.remove('hidden');
            document.getElementById('loadingMessage').textContent = message;
        }
        
        function hideLoading() {
            loadingOverlay.classList.add('hidden');
        }
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
        function checkUserAndPermissions() {
            const savedUser = localStorage.getItem('inventoryUser');
            
            if (savedUser) {
                try {
                    currentUser = JSON.parse(savedUser);
                    console.log('Current user loaded from localStorage:', currentUser);
                    
                    // ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏≠‡∏û‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
                    showApp();
                    
                    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                    loadAllData();
                    
                } catch (error) {
                    console.error('Error parsing user data:', error);
                    localStorage.removeItem('inventoryUser');
                    showLogin();
                    showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ');
                }
            } else {
                showLogin();
            }
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
        function showLogin() {
            loginPage.classList.remove('hidden');
            appContainer.classList.add('hidden');
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡πÅ‡∏≠‡∏û‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô
        function showApp() {
            loginPage.classList.add('hidden');
            appContainer.classList.remove('hidden');
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô UI
            updateUserInfo();
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ï‡∏≤‡∏°‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó
            setupPermissions();
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏à‡∏≤‡∏Å Local Storage
            loadSettingsFromLocalStorage();
            
            // ‡πÅ‡∏™‡∏î‡∏á Dashboard ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
            showPage('dashboardPage');
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á
            setTimeout(() => {
                createSampleNotifications();
            }, 1000);
            
            showToast(`‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ${currentUser.username}!`, 'success');
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô UI
        function updateUserInfo() {
            if (!currentUser) return;
            
            const currentUsername = document.getElementById('currentUsername');
            const welcomeUsername = document.getElementById('welcomeUsername');
            const userRoleBadge = document.getElementById('userRoleBadge');
            const userRoleText = document.getElementById('userRoleText');
            const welcomeMessage = document.getElementById('welcomeMessage');
            
            if (currentUsername) currentUsername.textContent = currentUser.username;
            if (welcomeUsername) welcomeUsername.textContent = currentUser.username;
            
            let roleDisplay = '';
            let badgeClass = '';
            
            switch(currentUser.role) {
                case 'admin':
                    roleDisplay = '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';
                    badgeClass = 'role-admin';
                    if (welcomeMessage) welcomeMessage.textContent = '‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô';
                    break;
                case 'manager':
                    roleDisplay = '‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£';
                    badgeClass = 'role-manager';
                    if (welcomeMessage) welcomeMessage.textContent = '‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ';
                    break;
                case 'user':
                    roleDisplay = '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
                    badgeClass = 'role-user';
                    if (welcomeMessage) welcomeMessage.textContent = '‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ';
                    break;
            }
            
            if (userRoleBadge) {
                userRoleBadge.textContent = roleDisplay;
                userRoleBadge.className = `role-badge ${badgeClass}`;
            }
            if (userRoleText) userRoleText.textContent = '‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå';
        }
        
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ï‡∏≤‡∏°‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó
        function setupPermissions() {
            if (!currentUser) return;
            
            console.log('Setting up permissions for role:', currentUser.role);
            
            const permissions = rolePermissions[currentUser.role];
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≤‡∏°‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
            const navUsers = document.getElementById('navUsers');
            const navSalesReport = document.getElementById('navSalesReport');
            const navSettings = document.getElementById('navSettings');
            
            if (navUsers) navUsers.style.display = permissions.canManageUsers ? 'flex' : 'none';
            if (navSalesReport) navSalesReport.style.display = permissions.canViewSales ? 'flex' : 'none';
            if (navSettings) navSettings.style.display = permissions.canManageSettings ? 'flex' : 'none';
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Products
            const productsTableInfo = document.getElementById('productsTableInfo');
            if (productsTableInfo) {
                if (permissions.canDelete) {
                    productsTableInfo.textContent = '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡πÅ‡∏•‡∏∞‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ';
                } else {
                    productsTableInfo.textContent = '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡πÑ‡∏î‡πâ';
                }
            }
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ Users
            const usersTableInfo = document.querySelector('#usersPage p.text-gray-400');
            if (usersTableInfo) {
                if (permissions.canManageUsers) {
                    usersTableInfo.textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏•‡∏ö ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö';
                } else {
                    usersTableInfo.textContent = '‡∏Ñ‡∏∏‡∏ì‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ';
                }
            }
        }
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå
        function checkPermission(permission) {
            if (!currentUser) return false;
            return rolePermissions[currentUser.role][permission] || false;
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤
        function showPage(pageId) {
            // ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤
            const pages = document.querySelectorAll('.page-content');
            pages.forEach(page => page.classList.add('hidden'));
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
            const activePage = document.getElementById(pageId);
            if (activePage) {
                activePage.classList.remove('hidden');
                
                // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤ Sales ‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≤‡∏¢
                if (pageId === 'salesPage') {
                    loadSalesProducts();
                    loadRecentSales();
                    updateTodaySalesStats();
                    resetCart();
                    setupPaymentMethodListener();
                }
                
                // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤ Sales Report ‡πÉ‡∏´‡πâ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
                if (pageId === 'salesReportPage') {
                    loadSalesReports();
                }
                
                // ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤ Dashboard ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
                if (pageId === 'dashboardPage') {
                    updateDashboardStats();
                    loadRecentSalesForDashboard();
                }
            }
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Navigation
            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => link.classList.remove('active'));
            
            // ‡πÅ‡∏õ‡∏•‡∏á pageId ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏õ‡∏∏‡πà‡∏° navigation
            let navId = '';
            switch(pageId) {
                case 'dashboardPage': navId = 'navDashboard'; break;
                case 'productsPage': navId = 'navProducts'; break;
                case 'salesPage': navId = 'navSales'; break;
                case 'salesReportPage': navId = 'navSalesReport'; break;
                case 'usersPage': navId = 'navUsers'; break;
                case 'settingsPage': navId = 'navSettings'; break;
            }
            
            const activeNav = document.getElementById(navId);
            if (activeNav) {
                activeNav.classList.add('active');
            }
        }
        
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡∏ü‡∏±‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
        function setupPaymentMethodListener() {
            const paymentMethodSelect = document.getElementById('paymentMethod');
            if (paymentMethodSelect) {
                paymentMethodSelect.addEventListener('change', function() {
                    const bankAccountInfo = document.getElementById('bankAccountInfo');
                    if (this.value === '‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô') {
                        bankAccountInfo.classList.remove('hidden');
                    } else {
                        bankAccountInfo.classList.add('hidden');
                    }
                });
            }
        }
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        function loadAllData() {
            showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...');
            
            Promise.all([
                loadProducts(),
                loadUsers(),
                loadSales(),
                loadSaleCounter()
            ]).then(() => {
                hideLoading();
                updateDashboardStats();
                showToast('‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
            }).catch(error => {
                hideLoading();
                showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ');
                console.error('Error loading data:', error);
            });
        }
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        function loadProducts() {
            return new Promise((resolve, reject) => {
                const productsRef = database.ref('products');
                
                productsRef.on('value', (snapshot) => {
                    products = [];
                    const data = snapshot.val();
                    
                    if (data) {
                        Object.keys(data).forEach(key => {
                            products.push({
                                id: key,
                                ...data[key]
                            });
                        });
                    }
                    
                    products.sort((a, b) => a.productCode.localeCompare(b.productCode));
                    updateProductsTable();
                    resolve();
                }, (error) => {
                    console.error('Error loading products:', error);
                    reject(error);
                });
            });
        }
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        function loadUsers() {
            return new Promise((resolve, reject) => {
                const usersRef = database.ref('users');
                
                usersRef.on('value', (snapshot) => {
                    users = [];
                    const data = snapshot.val();
                    
                    if (data) {
                        Object.keys(data).forEach(key => {
                            const userData = data[key];
                            if (userData && userData.username && userData.role) {
                                users.push({
                                    id: key,
                                    ...userData
                                });
                            }
                        });
                    }
                    
                    ensureDefaultUsers();
                    updateUsersTable();
                    resolve();
                }, (error) => {
                    console.error('Error loading users:', error);
                    reject(error);
                });
            });
        }
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
        function loadSales() {
            return new Promise((resolve, reject) => {
                const salesRef = database.ref('sales');
                
                salesRef.on('value', (snapshot) => {
                    sales = [];
                    const data = snapshot.val();
                    
                    if (data) {
                        Object.keys(data).forEach(key => {
                            sales.push({
                                id: key,
                                ...data[key]
                            });
                        });
                    }
                    
                    // ‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏≤‡∏¢ (‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏õ‡πÄ‡∏Å‡πà‡∏≤)
                    sales.sort((a, b) => new Date(b.saleDate) - new Date(a.saleDate));
                    resolve();
                }, (error) => {
                    console.error('Error loading sales:', error);
                    reject(error);
                });
            });
        }
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
        function loadSaleCounter() {
            return new Promise((resolve) => {
                const counterRef = database.ref('saleCounter');
                
                counterRef.once('value').then(snapshot => {
                    const data = snapshot.val();
                    if (data && data.counter) {
                        saleCounter = data.counter;
                    } else {
                        // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ ‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏µ‡πà 1
                        saleCounter = 1;
                        counterRef.set({ counter: saleCounter });
                    }
                    resolve();
                }).catch(error => {
                    console.error('Error loading sale counter:', error);
                    saleCounter = 1;
                    resolve();
                });
            });
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
        function updateSaleCounter() {
            const counterRef = database.ref('saleCounter');
            counterRef.set({ counter: saleCounter });
        }
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        function ensureDefaultUsers() {
            const defaultUsers = [
                { username: 'admin', password: 'admin123', role: 'admin', fullName: '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö' },
                { username: 'manager', password: 'manager123', role: 'manager', fullName: '‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£' },
                { username: 'user', password: 'user123', role: 'user', fullName: '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ' }
            ];
            
            defaultUsers.forEach(defaultUser => {
                const userExists = users.some(user => user.username === defaultUser.username);
                if (!userExists) {
                    database.ref('users').push({
                        username: defaultUser.username,
                        password: defaultUser.password,
                        role: defaultUser.role,
                        fullName: defaultUser.fullName,
                        createdAt: new Date().toISOString(),
                        lastLogin: null,
                        isActive: true
                    }).then(() => {
                        console.log(`‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô: ${defaultUser.username}`);
                    }).catch(error => {
                        console.error(`Error adding default user ${defaultUser.username}:`, error);
                    });
                }
            });
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        function updateProductsTable() {
            const tableBody = document.getElementById('productsTableBody');
            if (!tableBody) return;
            
            tableBody.innerHTML = '';
            
            if (products.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="8" class="px-6 py-12 text-center text-gray-500">
                            <i class="fas fa-box-open text-4xl mb-4 animate-pulse"></i>
                            <p class="text-lg">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
                            <p class="text-sm mt-2">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            const canDelete = checkPermission('canDelete');
            
            products.forEach(product => {
                const totalValue = product.quantity * product.price;
                const isLowStock = product.quantity <= 5 && product.quantity > 0;
                const isOutOfStock = product.quantity <= 0;
                
                let statusClass = 'bg-green-900 text-green-300';
                let statusText = '‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏à‡∏≥‡∏´‡∏ô‡πà‡∏≤‡∏¢';
                let statusIcon = 'check-circle';
                
                if (isLowStock) {
                    statusClass = 'bg-yellow-900 text-yellow-300';
                    statusText = '‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢';
                    statusIcon = 'exclamation-triangle';
                } else if (isOutOfStock) {
                    statusClass = 'bg-red-900 text-red-300';
                    statusText = '‡∏´‡∏°‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å';
                    statusIcon = 'times-circle';
                }
                
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-700 transition-colors product-card';
                
                let actionButtons = '';
                const canEdit = checkPermission('canEdit');
                
                if (canEdit) {
                    actionButtons += `
                        <button onclick="editProduct('${product.id}')" class="text-indigo-400 hover:text-indigo-300 mr-3 transition-colors hover-effect">
                            <i class="fas fa-edit mr-1"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        </button>
                    `;
                }
                
                if (canDelete) {
                    actionButtons += `
                        <button onclick="showDeleteProductConfirm('${product.id}', '${product.productName}')" class="text-red-400 hover:text-red-300 transition-colors hover-effect">
                            <i class="fas fa-trash-alt mr-1"></i> ‡∏•‡∏ö
                        </button>
                    `;
                } else {
                    actionButtons += `<span class="text-gray-500 text-sm"><i class="fas fa-ban mr-1"></i> ‡∏•‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ</span>`;
                }
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="font-mono font-bold text-indigo-300">${product.productCode}</span>
                    </td>
                    <td class="px-6 py-4">
                        <div class="font-medium">${product.productName}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-3 py-1 bg-gray-700 rounded-full text-sm">${product.category}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="font-bold ${isOutOfStock ? 'text-red-400' : (isLowStock ? 'text-yellow-400' : 'text-green-400')}">${product.quantity.toLocaleString()}</span> ‡∏ä‡∏¥‡πâ‡∏ô
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        ‡∏ø<span class="font-bold">${product.price.toLocaleString('th-TH', {minimumFractionDigits: 2})}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="font-bold text-lg">‡∏ø${totalValue.toLocaleString('th-TH', {minimumFractionDigits: 2})}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="px-3 py-1 rounded-full text-xs font-bold ${statusClass} flex items-center">
                            <i class="fas fa-${statusIcon} mr-1"></i> ${statusText}
                        </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        ${actionButtons}
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            updateProductStats();
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        function updateUsersTable() {
            const tableBody = document.getElementById('usersTableBody');
            if (!tableBody) return;
            
            tableBody.innerHTML = '';
            
            if (users.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="7" class="px-6 py-12 text-center text-gray-500">
                            <i class="fas fa-users text-4xl mb-4 animate-pulse"></i>
                            <p class="text-lg">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</p>
                            <p class="text-sm mt-2">‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            const canManageUsers = checkPermission('canManageUsers');
            
            users.forEach(user => {
                if (!user.username || !user.role) return;
                
                let roleBadge = '';
                let roleDisplay = '';
                
                switch(user.role) {
                    case 'admin':
                        roleBadge = 'role-admin';
                        roleDisplay = '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';
                        break;
                    case 'manager':
                        roleBadge = 'role-manager';
                        roleDisplay = '‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£';
                        break;
                    case 'user':
                        roleBadge = 'role-user';
                        roleDisplay = '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
                        break;
                    default:
                        roleBadge = 'role-user';
                        roleDisplay = '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
                }
                
                const permissions = rolePermissions[user.role] || rolePermissions['user'];
                let permissionsHtml = '';
                
                if (permissions.canView) permissionsHtml += '<span class="permission-badge permission-allowed">‡∏î‡∏π</span> ';
                if (permissions.canAdd) permissionsHtml += '<span class="permission-badge permission-allowed">‡πÄ‡∏û‡∏¥‡πà‡∏°</span> ';
                if (permissions.canEdit) permissionsHtml += '<span class="permission-badge permission-allowed">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</span> ';
                if (permissions.canDelete) permissionsHtml += '<span class="permission-badge permission-allowed">‡∏•‡∏ö</span> ';
                if (permissions.canManageUsers) permissionsHtml += '<span class="permission-badge permission-allowed">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</span> ';
                if (permissions.canViewReports) permissionsHtml += '<span class="permission-badge permission-allowed">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</span>';
                
                const status = user.isActive !== false ? 'active' : 'inactive';
                const statusText = user.isActive !== false ? '‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ' : '‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
                const statusColor = user.isActive !== false ? 'text-green-400' : 'text-red-400';
                
                const lastLogin = user.lastLogin ? new Date(user.lastLogin).toLocaleString('th-TH') : '‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô';
                
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-700 transition-colors product-card';
                
                let actionButtons = '';
                
                if (canManageUsers) {
                    actionButtons = `
                        <button onclick="editUser('${user.id}')" class="text-indigo-400 hover:text-indigo-300 mr-3 transition-colors hover-effect">
                            <i class="fas fa-edit mr-1"></i> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                        </button>
                    `;
                    
                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏∞‡∏•‡∏ö‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                    if (user.id !== currentUser.id) {
                        actionButtons += `
                            <button onclick="showDeleteUserConfirm('${user.id}', '${user.fullName || user.username}')" class="text-red-400 hover:text-red-300 transition-colors hover-effect">
                                <i class="fas fa-trash-alt mr-1"></i> ‡∏•‡∏ö
                            </button>
                        `;
                    } else {
                        actionButtons += '<span class="text-gray-500 text-sm">(‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)</span>';
                    }
                } else {
                    actionButtons = '<span class="text-gray-500 text-sm">‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ</span>';
                }
                
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap">
                        <div class="font-medium">${user.username}</div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="font-medium">${user.fullName || '-'}</div>
                        <div class="text-gray-400 text-sm">${user.email || ''}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="${roleBadge}">${roleDisplay}</span>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex flex-wrap gap-1">
                            ${permissionsHtml}
                        </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                        <span class="${statusColor} font-medium">${statusText}</span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm">
                        ${lastLogin}
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        ${actionButtons}
                    </td>
                `;
                
                tableBody.appendChild(row);
            });
            
            updateUserStats();
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
        function updateDashboardStats() {
            // ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            const totalProducts = products.length;
            const totalValue = products.reduce((sum, product) => sum + (product.quantity * product.price), 0);
            const outOfStock = products.filter(p => p.quantity <= 0).length;
            
            document.getElementById('totalProducts').textContent = totalProducts;
            document.getElementById('totalValue').textContent = '‡∏ø' + totalValue.toLocaleString('th-TH', {minimumFractionDigits: 2});
            document.getElementById('outOfStock').textContent = outOfStock;
            
            // ‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
            const today = new Date().toISOString().split('T')[0];
            const todaySales = sales.filter(sale => {
                const saleDate = new Date(sale.saleDate).toISOString().split('T')[0];
                return saleDate === today;
            });
            
            const todayTotal = todaySales.reduce((sum, sale) => sum + sale.totalAmount, 0);
            document.getElementById('todaySales').textContent = '‡∏ø' + todayTotal.toLocaleString('th-TH', {minimumFractionDigits: 2});
        }
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î
        function loadRecentSalesForDashboard() {
            const recentSalesContainer = document.getElementById('recentSales');
            if (!recentSalesContainer) return;
            
            recentSalesContainer.innerHTML = '';
            
            const recentSales = sales.slice(0, 5); // 5 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
            
            if (recentSales.length === 0) {
                recentSalesContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-receipt text-2xl mb-2"></i>
                        <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</p>
                    </div>
                `;
                return;
            }
            
            recentSales.forEach(sale => {
                const saleElement = document.createElement('div');
                saleElement.className = 'bg-gray-900/50 p-4 rounded-lg product-card hover-effect';
                
                const saleDate = new Date(sale.saleDate);
                const formattedDate = saleDate.toLocaleDateString('th-TH', {
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                saleElement.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <div class="font-medium">${sale.customerName}</div>
                            <div class="text-gray-400 text-sm">${formattedDate}</div>
                            <div class="text-xs mt-1">
                                <span class="px-2 py-1 bg-gray-700 rounded">${sale.paymentMethod}</span>
                                <span class="ml-2">${sale.items ? Object.keys(sale.items).length : 0} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-lg text-green-400">‡∏ø${sale.totalAmount.toLocaleString('th-TH', {minimumFractionDigits: 2})}</div>
                            <div class="text-gray-400 text-sm">${sale.saleCode}</div>
                        </div>
                    </div>
                `;
                
                recentSalesContainer.appendChild(saleElement);
            });
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        function updateProductStats() {
            const totalProducts = products.length;
            const totalValue = products.reduce((sum, product) => sum + (product.quantity * product.price), 0);
            const outOfStock = products.filter(p => p.quantity <= 0).length;
            const lowStock = products.filter(p => p.quantity > 0 && p.quantity <= 5).length;
            const inStock = products.filter(p => p.quantity > 5).length;
            
            document.getElementById('totalProductsCount').textContent = totalProducts + ' ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£';
            document.getElementById('totalProductsValue').textContent = '‡∏ø' + totalValue.toLocaleString('th-TH', {minimumFractionDigits: 2});
            document.getElementById('outOfStockCount').textContent = outOfStock + ' ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£';
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        function updateUserStats() {
            const totalUsers = users.length;
            const adminUsers = users.filter(u => u.role === 'admin').length;
            const managerUsers = users.filter(u => u.role === 'manager').length;
            const normalUsers = users.filter(u => u.role === 'user').length;
            
            document.getElementById('totalUsersCount').textContent = totalUsers + ' ‡∏Ñ‡∏ô';
            document.getElementById('adminUsersCount').textContent = adminUsers + ' ‡∏Ñ‡∏ô';
            document.getElementById('managerUsersCount').textContent = managerUsers + ' ‡∏Ñ‡∏ô';
            document.getElementById('normalUsersCount').textContent = normalUsers + ' ‡∏Ñ‡∏ô';
        }
        
        // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
        function loginUser(username, password) {
            showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ...');
            
            // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å users array
            const userRef = database.ref('users');
            userRef.once('value').then(snapshot => {
                const usersData = snapshot.val();
                let userFound = null;
                let userId = null;
                
                // ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö username ‡πÅ‡∏•‡∏∞ password
                if (usersData) {
                    Object.keys(usersData).forEach(key => {
                        const user = usersData[key];
                        if (user.username === username && user.password === password) {
                            userFound = user;
                            userId = key;
                        }
                    });
                }
                
                if (userFound) {
                    currentUser = {
                        id: userId,
                        username: username,
                        role: userFound.role || 'user',
                        fullName: userFound.fullName || username
                    };
                    
                    console.log('Login successful for user:', currentUser);
                    
                    localStorage.setItem('inventoryUser', JSON.stringify(currentUser));
                    
                    database.ref('users/' + userId).update({
                        lastLogin: new Date().toISOString()
                    }).then(() => {
                        console.log('User login time updated:', username);
                    }).catch(error => {
                        console.error('Error updating user login time:', error);
                    });
                    
                    setTimeout(() => {
                        hideLoading();
                        showApp();
                        showAlert('success', '‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', `‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö ${username}!`);
                    }, 1000);
                    
                } else {
                    hideLoading();
                    showAlert('error', '‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                }
            }).catch(error => {
                console.error('Error checking user:', error);
                hideLoading();
                showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ');
            });
        }
        
        // ==================== SALES REPORT FUNCTIONS ====================
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
        function loadSalesReports() {
            // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà - 7 ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏°‡∏≤
            const endDate = new Date();
            const startDate = new Date();
            startDate.setDate(startDate.getDate() - 7);
            
            document.getElementById('reportStartDate').valueAsDate = startDate;
            document.getElementById('reportEndDate').valueAsDate = endDate;
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÅ‡∏ó‡πá‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
            setupReportTabs();
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
            generateSalesReport();
        }
        
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÅ‡∏ó‡πá‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
        function setupReportTabs() {
            const tabs = document.querySelectorAll('.tab[data-tab]');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÅ‡∏ó‡πá‡∏ö‡∏ó‡∏µ‡πà active
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏ó‡πá‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å
                    document.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));
                    document.getElementById(tabId).classList.remove('hidden');
                    
                    // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ó‡πá‡∏ö‡∏ô‡∏±‡πâ‡∏ô
                    if (tabId === 'dailyReport') {
                        updateDailyReport();
                    } else if (tabId === 'topProductsReport') {
                        updateTopProductsReport();
                    } else if (tabId === 'salesListReport') {
                        updateSalesListReport();
                    }
                });
            });
        }
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
        function generateSalesReport() {
            const startDate = document.getElementById('reportStartDate').value;
            const endDate = document.getElementById('reportEndDate').value;
            const category = document.getElementById('reportCategoryFilter').value;
            
            if (!startDate || !endDate) {
                showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î');
                return;
            }
            
            // ‡πÅ‡∏õ‡∏•‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
            const start = new Date(startDate);
            const end = new Date(endDate);
            end.setHours(23, 59, 59, 999); // ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏ß‡∏±‡∏ô
            
            // ‡∏Å‡∏£‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
            let filteredSales = sales.filter(sale => {
                const saleDate = new Date(sale.saleDate);
                return saleDate >= start && saleDate <= end;
            });
            
            // ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
            if (category) {
                filteredSales = filteredSales.filter(sale => {
                    // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
                    if (sale.items) {
                        const items = Object.values(sale.items);
                        return items.some(item => {
                            const product = products.find(p => p.id === item.productId);
                            return product && product.category === category;
                        });
                    }
                    return false;
                });
            }
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥
            updateReportStatistics(filteredSales);
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
            updateDailyReport(filteredSales);
            updateTopProductsReport(filteredSales);
            updateSalesListReport(filteredSales);
            
            showToast('‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
        function updateReportStatistics(filteredSales) {
            const totalSalesCount = filteredSales.length;
            const totalSalesAmount = filteredSales.reduce((sum, sale) => sum + sale.totalAmount, 0);
            const totalItemsSold = filteredSales.reduce((sum, sale) => {
                return sum + (sale.items ? Object.keys(sale.items).length : 0);
            }, 0);
            const averageSaleAmount = totalSalesCount > 0 ? totalSalesAmount / totalSalesCount : 0;
            
            document.getElementById('totalSalesCount').textContent = totalSalesCount.toLocaleString();
            document.getElementById('totalSalesAmount').textContent = '‡∏ø' + totalSalesAmount.toLocaleString('th-TH', {minimumFractionDigits: 2});
            document.getElementById('totalItemsSold').textContent = totalItemsSold.toLocaleString();
            document.getElementById('averageSaleAmount').textContent = '‡∏ø' + averageSaleAmount.toLocaleString('th-TH', {minimumFractionDigits: 2});
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
        function updateDailyReport(filteredSales = []) {
            // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á filteredSales ‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà
            if (filteredSales.length === 0) {
                const startDate = document.getElementById('reportStartDate').value;
                const endDate = document.getElementById('reportEndDate').value;
                
                if (!startDate || !endDate) return;
                
                const start = new Date(startDate);
                const end = new Date(endDate);
                end.setHours(23, 59, 59, 999);
                
                filteredSales = sales.filter(sale => {
                    const saleDate = new Date(sale.saleDate);
                    return saleDate >= start && saleDate <= end;
                });
            }
            
            // ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô
            const dailySales = {};
            
            filteredSales.forEach(sale => {
                const saleDate = new Date(sale.saleDate);
                const dateKey = saleDate.toISOString().split('T')[0];
                
                if (!dailySales[dateKey]) {
                    dailySales[dateKey] = {
                        date: saleDate,
                        salesCount: 0,
                        totalAmount: 0,
                        itemsSold: 0
                    };
                }
                
                dailySales[dateKey].salesCount++;
                dailySales[dateKey].totalAmount += sale.totalAmount;
                dailySales[dateKey].itemsSold += sale.items ? Object.keys(sale.items).length : 0;
            });
            
            // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô array ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
            const dailyArray = Object.values(dailySales).sort((a, b) => a.date - b.date);
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
            const tableBody = document.getElementById('dailySalesTableBody');
            tableBody.innerHTML = '';
            
            if (dailyArray.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="5" class="px-4 py-8 text-center text-gray-500">
                            <i class="fas fa-chart-line text-xl mb-2"></i>
                            <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</p>
                        </td>
                    </tr>
                `;
                
                // ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                const chartContainer = document.getElementById('dailySalesChart');
                chartContainer.innerHTML = `
                    <div class="text-center text-gray-500">
                        <i class="fas fa-chart-bar text-3xl mb-3"></i>
                        <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</p>
                        <p class="text-sm">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</p>
                    </div>
                `;
                return;
            }
            
            dailyArray.forEach(day => {
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-700';
                row.innerHTML = `
                    <td class="px-4 py-3">${day.date.toLocaleDateString('th-TH')}</td>
                    <td class="px-4 py-3">${day.salesCount}</td>
                    <td class="px-4 py-3">‡∏ø${day.totalAmount.toLocaleString('th-TH', {minimumFractionDigits: 2})}</td>
                    <td class="px-4 py-3">${day.itemsSold}</td>
                    <td class="px-4 py-3">‡∏ø${(day.totalAmount / day.salesCount).toLocaleString('th-TH', {minimumFractionDigits: 2})}</td>
                `;
                tableBody.appendChild(row);
            });
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
            createDailySalesChart(dailyArray);
        }
        
        // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á‡πÅ‡∏™‡∏î‡∏á‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô
        function createDailySalesChart(dailyArray) {
            const chartContainer = document.getElementById('dailySalesChart');
            
            // ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏Å‡πà‡∏≤
            chartContainer.innerHTML = '<canvas id="dailyChart" style="height: 256px;"></canvas>';
            
            // ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏£‡∏≤‡∏ü
            const labels = dailyArray.map(day => day.date.toLocaleDateString('th-TH', { day: 'numeric', month: 'short' }));
            const salesData = dailyArray.map(day => day.totalAmount);
            const salesCountData = dailyArray.map(day => day.salesCount);
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Chart.js ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            if (typeof Chart === 'undefined') {
                chartContainer.innerHTML = `
                    <div class="text-center text-gray-500">
                        <i class="fas fa-chart-bar text-3xl mb-3"></i>
                        <p>‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÑ‡∏î‡πâ</p>
                        <p class="text-sm">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</p>
                    </div>
                `;
                return;
            }
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á
            const ctx = document.getElementById('dailyChart').getContext('2d');
            
            // ‡∏•‡∏ö‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
            if (window.dailyChartInstance) {
                window.dailyChartInstance.destroy();
            }
            
            window.dailyChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: '‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó)',
                            data: salesData,
                            backgroundColor: 'rgba(59, 130, 246, 0.7)',
                            borderColor: 'rgba(59, 130, 246, 1)',
                            borderWidth: 1,
                            yAxisID: 'y'
                        },
                        {
                            label: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢',
                            data: salesCountData,
                            backgroundColor: 'rgba(16, 185, 129, 0.7)',
                            borderColor: 'rgba(16, 185, 129, 1)',
                            borderWidth: 1,
                            yAxisID: 'y1',
                            type: 'line',
                            fill: false
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                color: '#d1d5db'
                            }
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'rgba(31, 41, 55, 0.9)',
                            titleColor: '#f3f4f6',
                            bodyColor: '#f3f4f6',
                            borderColor: '#4b5563',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: '#9ca3af'
                            },
                            grid: {
                                color: '#374151'
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: '‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏° (‡∏ö‡∏≤‡∏ó)',
                                color: '#9ca3af'
                            },
                            ticks: {
                                color: '#9ca3af',
                                callback: function(value) {
                                    return '‡∏ø' + value.toLocaleString('th-TH');
                                }
                            },
                            grid: {
                                color: '#374151'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢',
                                color: '#9ca3af'
                            },
                            ticks: {
                                color: '#9ca3af'
                            },
                            grid: {
                                drawOnChartArea: false,
                                color: '#374151'
                            }
                        }
                    }
                }
            });
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ
        function updateTopProductsReport(filteredSales = []) {
            // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á filteredSales ‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà
            if (filteredSales.length === 0) {
                const startDate = document.getElementById('reportStartDate').value;
                const endDate = document.getElementById('reportEndDate').value;
                
                if (!startDate || !endDate) return;
                
                const start = new Date(startDate);
                const end = new Date(endDate);
                end.setHours(23, 59, 59, 999);
                
                filteredSales = sales.filter(sale => {
                    const saleDate = new Date(sale.saleDate);
                    return saleDate >= start && saleDate <= end;
                });
            }
            
            // ‡∏ô‡∏±‡∏ö‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            const productSales = {};
            
            filteredSales.forEach(sale => {
                if (sale.items) {
                    Object.values(sale.items).forEach(item => {
                        if (!productSales[item.productId]) {
                            productSales[item.productId] = {
                                productName: item.productName,
                                totalQuantity: 0,
                                totalAmount: 0
                            };
                        }
                        
                        productSales[item.productId].totalQuantity += item.quantity;
                        productSales[item.productId].totalAmount += item.total;
                    });
                }
            });
            
            // ‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏õ‡πá‡∏ô array ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢
            const topProducts = Object.values(productSales)
                .sort((a, b) => b.totalAmount - a.totalAmount)
                .slice(0, 10); // 10 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡πÅ‡∏£‡∏Å
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ
            const topProductsList = document.getElementById('topProductsList');
            topProductsList.innerHTML = '';
            
            if (topProducts.length === 0) {
                topProductsList.innerHTML = `
                    <div class="text-center py-12 text-gray-500">
                        <i class="fas fa-crown text-3xl mb-3"></i>
                        <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ</p>
                        <p class="text-sm">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</p>
                    </div>
                `;
                return;
            }
            
            topProducts.forEach((product, index) => {
                const productElement = document.createElement('div');
                productElement.className = 'bg-gray-900/50 p-4 rounded-lg product-card hover-effect';
                productElement.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div class="flex items-center">
                            <div class="w-8 h-8 flex items-center justify-center bg-indigo-600 text-white rounded-full mr-3">
                                ${index + 1}
                            </div>
                            <div>
                                <div class="font-medium">${product.productName}</div>
                                <div class="text-gray-400 text-sm">‡∏Ç‡∏≤‡∏¢‡πÑ‡∏î‡πâ ${product.totalQuantity} ‡∏ä‡∏¥‡πâ‡∏ô</div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-green-400">‡∏ø${product.totalAmount.toLocaleString('th-TH', {minimumFractionDigits: 2})}</div>
                        </div>
                    </div>
                `;
                topProductsList.appendChild(productElement);
            });
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
        function updateSalesListReport(filteredSales = []) {
            // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á filteredSales ‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÉ‡∏´‡∏°‡πà
            if (filteredSales.length === 0) {
                const startDate = document.getElementById('reportStartDate').value;
                const endDate = document.getElementById('reportEndDate').value;
                
                if (!startDate || !endDate) return;
                
                const start = new Date(startDate);
                const end = new Date(endDate);
                end.setHours(23, 59, 59, 999);
                
                filteredSales = sales.filter(sale => {
                    const saleDate = new Date(sale.saleDate);
                    return saleDate >= start && saleDate <= end;
                });
            }
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
            const tableBody = document.getElementById('salesListTableBody');
            tableBody.innerHTML = '';
            
            if (filteredSales.length === 0) {
                tableBody.innerHTML = `
                    <tr>
                        <td colspan="8" class="px-4 py-8 text-center text-gray-500">
                            <i class="fas fa-receipt text-xl mb-2"></i>
                            <p>‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            filteredSales.forEach(sale => {
                const saleDate = new Date(sale.saleDate);
                const formattedDate = saleDate.toLocaleDateString('th-TH', {
                    day: 'numeric',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                const row = document.createElement('tr');
                row.className = 'hover:bg-gray-700';
                row.innerHTML = `
                    <td class="px-4 py-3">${sale.saleCode}</td>
                    <td class="px-4 py-3">${sale.customerName}</td>
                    <td class="px-4 py-3">${formattedDate}</td>
                    <td class="px-4 py-3">${sale.items ? Object.keys(sale.items).length : 0}</td>
                    <td class="px-4 py-3">‡∏ø${sale.totalAmount.toLocaleString('th-TH', {minimumFractionDigits: 2})}</td>
                    <td class="px-4 py-3">
                        <span class="px-2 py-1 bg-gray-700 rounded text-xs">${sale.paymentMethod}</span>
                    </td>
                    <td class="px-4 py-3">${sale.seller}</td>
                    <td class="px-4 py-3">
                        <button onclick="viewReceipt('${sale.id}')" class="text-indigo-400 hover:text-indigo-300 transition-colors hover-effect">
                            <i class="fas fa-receipt mr-1"></i> ‡∏î‡∏π‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
                        </button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }
        
        // ==================== SALES SYSTEM FUNCTIONS ====================
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢
        function loadSalesProducts() {
            const productList = document.getElementById('salesProductList');
            if (!productList) return;
            
            productList.innerHTML = '';
            
            if (products.length === 0) {
                productList.innerHTML = `
                    <div class="col-span-2 text-center py-12 text-gray-500">
                        <i class="fas fa-box-open text-3xl mb-3"></i>
                        <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</p>
                        <p class="text-sm mt-2">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</p>
                    </div>
                `;
                return;
            }
            
            // ‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏™‡∏ï‡πä‡∏≠‡∏Å
            const inStockProducts = products.filter(p => p.quantity > 0);
            
            if (inStockProducts.length === 0) {
                productList.innerHTML = `
                    <div class="col-span-2 text-center py-12 text-gray-500">
                        <i class="fas fa-exclamation-triangle text-3xl mb-3"></i>
                        <p>‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                        <p class="text-sm mt-2">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</p>
                    </div>
                `;
                return;
            }
            
            inStockProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'bg-gray-900 rounded-lg p-4 product-card hover-effect';
                
                const isLowStock = product.quantity <= 5;
                
                productCard.innerHTML = `
                    <div class="flex justify-between items-start mb-2">
                        <div>
                            <h4 class="font-bold">${product.productName}</h4>
                            <div class="flex items-center mt-1">
                                <span class="text-xs px-2 py-1 bg-gray-700 rounded">${product.category}</span>
                                <span class="text-xs ml-2 text-gray-400">${product.productCode}</span>
                            </div>
                        </div>
                        <span class="font-bold text-green-400">‡∏ø${product.price.toLocaleString('th-TH', {minimumFractionDigits: 2})}</span>
                    </div>
                    
                    <div class="flex justify-between items-center mt-4">
                        <div>
                            <span class="text-sm ${isLowStock ? 'text-yellow-400' : 'text-gray-300'}">
                                <i class="fas fa-box mr-1"></i> ‡∏Ñ‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠: ${product.quantity} ‡∏ä‡∏¥‡πâ‡∏ô
                            </span>
                        </div>
                        <button onclick="addToCart('${product.id}')" class="px-3 py-1 bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 rounded text-sm transition-colors hover-effect">
                            <i class="fas fa-plus mr-1"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°
                        </button>
                    </div>
                `;
                
                productList.appendChild(productCard);
            });
        }
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                // ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ô‡∏™‡∏ï‡πä‡∏≠‡∏Å‡∏û‡∏≠ ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
                if (existingItem.quantity < product.quantity) {
                    existingItem.quantity += 1;
                    existingItem.total = existingItem.quantity * existingItem.price;
                } else {
                    showAlert('warning', '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠', `‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${product.productName} ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏û‡∏µ‡∏¢‡∏á ${product.quantity} ‡∏ä‡∏¥‡πâ‡∏ô`);
                    return;
                }
            } else {
                // ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ ‡πÉ‡∏´‡πâ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
                if (product.quantity > 0) {
                    cart.push({
                        id: productId,
                        productCode: product.productCode,
                        productName: product.productName,
                        price: product.price,
                        quantity: 1,
                        total: product.price,
                        maxQuantity: product.quantity
                    });
                } else {
                    showAlert('warning', '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏°‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å', `‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${product.productName} ‡∏´‡∏°‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å`);
                    return;
                }
            }
            
            updateCartDisplay();
            showToast(`‡πÄ‡∏û‡∏¥‡πà‡∏° ${product.productName} ‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß`, 'success');
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
        function updateCartDisplay() {
            const cartItems = document.getElementById('cartItems');
            const cartSubtotal = document.getElementById('cartSubtotal');
            const cartTotal = document.getElementById('cartTotal');
            const discountAmount = document.getElementById('discountAmount');
            
            if (!cartItems || !cartSubtotal || !cartTotal) return;
            
            // ‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πà‡∏≤
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-shopping-cart text-2xl mb-2"></i>
                        <p>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>
                        <p class="text-sm">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>
                    </div>
                `;
                
                cartSubtotal.textContent = '‡∏ø0.00';
                cartTotal.textContent = '‡∏ø0.00';
                return;
            }
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
            cart.forEach((item, index) => {
                const cartItem = document.createElement('div');
                cartItem.className = 'flex justify-between items-center p-3 bg-gray-800 rounded cart-item';
                
                cartItem.innerHTML = `
                    <div class="flex-1">
                        <div class="font-medium">${item.productName}</div>
                        <div class="text-gray-400 text-sm">${item.productCode}</div>
                        <div class="text-green-400 font-bold">‡∏ø${item.price.toLocaleString('th-TH', {minimumFractionDigits: 2})}</div>
                    </div>
                    
                    <div class="flex items-center space-x-2">
                        <button onclick="decreaseQuantity(${index})" class="w-8 h-8 flex items-center justify-center bg-gray-700 hover:bg-gray-600 rounded">
                            <i class="fas fa-minus"></i>
                        </button>
                        
                        <span class="w-12 text-center font-bold">${item.quantity}</span>
                        
                        <button onclick="increaseQuantity(${index})" class="w-8 h-8 flex items-center justify-center bg-gray-700 hover:bg-gray-600 rounded">
                            <i class="fas fa-plus"></i>
                        </button>
                        
                        <span class="w-24 text-right font-bold">‡∏ø${item.total.toLocaleString('th-TH', {minimumFractionDigits: 2})}</span>
                        
                        <button onclick="removeFromCart(${index})" class="w-8 h-8 flex items-center justify-center bg-red-700 hover:bg-red-600 rounded ml-2">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                cartItems.appendChild(cartItem);
            });
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°
            const subtotal = cart.reduce((sum, item) => sum + item.total, 0);
            const discount = parseFloat(discountAmount.value) || 0;
            const total = subtotal - discount;
            
            cartSubtotal.textContent = '‡∏ø' + subtotal.toLocaleString('th-TH', {minimumFractionDigits: 2});
            cartTotal.textContent = '‡∏ø' + (total > 0 ? total : 0).toLocaleString('th-TH', {minimumFractionDigits: 2});
        }
        
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
        function increaseQuantity(index) {
            if (index < 0 || index >= cart.length) return;
            
            const item = cart[index];
            const product = products.find(p => p.id === item.id);
            
            if (!product) return;
            
            if (item.quantity < product.quantity) {
                item.quantity += 1;
                item.total = item.quantity * item.price;
                updateCartDisplay();
            } else {
                showAlert('warning', '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠', `‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${product.productName} ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏û‡∏µ‡∏¢‡∏á ${product.quantity} ‡∏ä‡∏¥‡πâ‡∏ô`);
            }
        }
        
        // ‡∏•‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
        function decreaseQuantity(index) {
            if (index < 0 || index >= cart.length) return;
            
            const item = cart[index];
            
            if (item.quantity > 1) {
                item.quantity -= 1;
                item.total = item.quantity * item.price;
                updateCartDisplay();
            } else {
                // ‡∏ñ‡πâ‡∏≤‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏õ‡πá‡∏ô 1 ‡πÉ‡∏´‡πâ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                removeFromCart(index);
            }
        }
        
        // ‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
        function removeFromCart(index) {
            if (index < 0 || index >= cart.length) return;
            
            const itemName = cart[index].productName;
            cart.splice(index, 1);
            updateCartDisplay();
            showToast(`‡∏•‡∏ö ${itemName} ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß`, 'info');
        }
        
        // ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
        function resetCart() {
            cart = [];
            document.getElementById('customerName').value = '‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
            document.getElementById('paymentMethod').value = '‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î';
            document.getElementById('discountAmount').value = '0';
            document.getElementById('bankAccountInfo').classList.add('hidden');
            updateCartDisplay();
        }
        
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
        function completeSale() {
            if (cart.length === 0) {
                showAlert('error', '‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Å‡πà‡∏≠‡∏ô‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢');
                return;
            }
            
            const customerName = document.getElementById('customerName').value.trim() || '‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
            const paymentMethod = document.getElementById('paymentMethod').value;
            const discount = parseFloat(document.getElementById('discountAmount').value) || 0;
            
            const subtotal = cart.reduce((sum, item) => sum + item.total, 0);
            const totalAmount = subtotal - discount;
            
            if (totalAmount <= 0) {
                showAlert('error', '‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', '‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 0 ‡∏ö‡∏≤‡∏ó');
                return;
            }
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏°‡∏µ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            for (const item of cart) {
                const product = products.find(p => p.id === item.id);
                if (!product || product.quantity < item.quantity) {
                    showAlert('error', '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠', `‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${item.productName} ‡∏°‡∏µ‡πÄ‡∏û‡∏µ‡∏¢‡∏á ${product ? product.quantity : 0} ‡∏ä‡∏¥‡πâ‡∏ô`);
                    return;
                }
            }
            
            // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô QR Payment ‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á QR Code
            if (paymentMethod === 'QR Payment') {
                showQRCodePayment();
                return;
            }
            
            // ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏≠‡∏∑‡πà‡∏ô ‡πÜ
            showConfirmation(
                '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢',
                `‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ô‡∏µ‡πâ?\n\n‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${customerName}\n‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: ‡∏ø${totalAmount.toLocaleString('th-TH', {minimumFractionDigits: 2})}\n‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞: ${paymentMethod}`,
                'question',
                '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢',
                '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
            ).then(confirmed => {
                if (confirmed) {
                    processSale(customerName, paymentMethod, discount, totalAmount);
                }
            });
        }
        
        // ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
        function processSale(customerName, paymentMethod, discount, totalAmount) {
            showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢...');
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏´‡∏±‡∏™‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
            const saleCode = `S${String(saleCounter).padStart(3, '0')}`;
            saleCounter++;
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
            const saleData = {
                saleCode: saleCode,
                customerName: customerName,
                paymentMethod: paymentMethod,
                discount: discount,
                subtotal: cart.reduce((sum, item) => sum + item.total, 0),
                totalAmount: totalAmount,
                saleDate: new Date().toISOString(),
                seller: currentUser.username,
                items: {}
            };
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            cart.forEach((item, index) => {
                saleData.items[`item${index}`] = {
                    productId: item.id,
                    productCode: item.productCode,
                    productName: item.productName,
                    price: item.price,
                    quantity: item.quantity,
                    total: item.total
                };
            });
            
            // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏•‡∏á Firebase
            database.ref('sales').push(saleData)
                .then((ref) => {
                    const saleId = ref.key;
                    
                    // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢
                    updateSaleCounter();
                    
                    // ‡∏ï‡∏±‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                    const updatePromises = cart.map(item => {
                        const productRef = database.ref('products/' + item.id);
                        return productRef.once('value').then(snapshot => {
                            const product = snapshot.val();
                            const newQuantity = product.quantity - item.quantity;
                            
                            return productRef.update({
                                quantity: newQuantity,
                                updatedBy: currentUser.username,
                                updatedAt: new Date().toISOString()
                            });
                        });
                    });
                    
                    return Promise.all(updatePromises);
                })
                .then(() => {
                    hideLoading();
                    
                    // ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
                    showReceipt(saleData);
                    
                    // ‡∏•‡πâ‡∏≤‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                    resetCart();
                    
                    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡∏°‡πà
                    loadProducts();
                    loadSales();
                    updateTodaySalesStats();
                    loadRecentSales();
                    
                    // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                    addNotification('‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', `‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ ${saleCode} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`, 'success');
                    
                    showAlert('success', '‡∏Ç‡∏≤‡∏¢‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', `‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢ ${saleCode} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`);
                })
                .catch(error => {
                    hideLoading();
                    console.error('Error processing sale:', error);
                    showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢');
                });
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
        function showReceipt(saleData) {
            const modal = document.getElementById('receiptModal');
            const receiptNumber = document.getElementById('receiptNumber');
            const receiptDate = document.getElementById('receiptDate');
            const receiptCustomer = document.getElementById('receiptCustomer');
            const receiptItems = document.getElementById('receiptItems');
            const receiptSubtotal = document.getElementById('receiptSubtotal');
            const receiptDiscount = document.getElementById('receiptDiscount');
            const receiptTotal = document.getElementById('receiptTotal');
            const receiptPaymentMethod = document.getElementById('receiptPaymentMethod');
            const receiptBankTransfer = document.getElementById('receiptBankTransfer');
            const receiptBankName = document.getElementById('receiptBankName');
            const receiptBankAccount = document.getElementById('receiptBankAccount');
            const receiptBankAccountName = document.getElementById('receiptBankAccountName');
            const receiptBankBranch = document.getElementById('receiptBankBranch');
            
            receiptNumber.textContent = saleData.saleCode;
            receiptDate.textContent = new Date(saleData.saleDate).toLocaleString('th-TH');
            receiptCustomer.textContent = saleData.customerName;
            receiptSubtotal.textContent = '‡∏ø' + saleData.subtotal.toLocaleString('th-TH', {minimumFractionDigits: 2});
            receiptDiscount.textContent = '‡∏ø' + saleData.discount.toLocaleString('th-TH', {minimumFractionDigits: 2});
            receiptTotal.textContent = '‡∏ø' + saleData.totalAmount.toLocaleString('th-TH', {minimumFractionDigits: 2});
            receiptPaymentMethod.textContent = saleData.paymentMethod;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ã‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
            if (saleData.paymentMethod === '‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô') {
                receiptBankTransfer.classList.remove('hidden');
                receiptBankName.textContent = bankAccount.bankName;
                receiptBankAccount.textContent = bankAccount.accountNumber;
                receiptBankAccountName.textContent = bankAccount.accountName;
                receiptBankBranch.textContent = bankAccount.branch;
            } else {
                receiptBankTransfer.classList.add('hidden');
            }
            
            // ‡∏•‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πà‡∏≤
            receiptItems.innerHTML = '';
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            Object.values(saleData.items).forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'flex justify-between mb-1';
                itemElement.innerHTML = `
                    <span>${item.productName} x${item.quantity}</span>
                    <span>‡∏ø${item.total.toLocaleString('th-TH', {minimumFractionDigits: 2})}</span>
                `;
                receiptItems.appendChild(itemElement);
            });
            
            modal.classList.remove('hidden');
        }
        
        // ‡∏î‡∏π‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
        function viewReceipt(saleId) {
            const sale = sales.find(s => s.id === saleId);
            if (sale) {
                showReceipt(sale);
            }
        }
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
        function loadRecentSales() {
            const recentSalesList = document.getElementById('recentSalesList');
            if (!recentSalesList) return;
            
            recentSalesList.innerHTML = '';
            
            const recentSales = sales.slice(0, 5); // 5 ‡∏≠‡∏±‡∏ô‡∏î‡∏±‡∏ö‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
            
            if (recentSales.length === 0) {
                recentSalesList.innerHTML = `
                    <div class="text-center py-4 text-gray-500">
                        <i class="fas fa-receipt text-xl mb-2"></i>
                        <p class="text-sm">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</p>
                    </div>
                `;
                return;
            }
            
            recentSales.forEach(sale => {
                const saleElement = document.createElement('div');
                saleElement.className = 'bg-gray-900/50 p-3 rounded-lg product-card hover-effect';
                
                const saleDate = new Date(sale.saleDate);
                const formattedTime = saleDate.toLocaleTimeString('th-TH', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                saleElement.innerHTML = `
                    <div class="flex justify-between items-center">
                        <div>
                            <div class="font-medium text-sm">${sale.customerName}</div>
                            <div class="text-gray-400 text-xs">${formattedTime}</div>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-green-400">‡∏ø${sale.totalAmount.toLocaleString('th-TH', {minimumFractionDigits: 2})}</div>
                            <div class="text-gray-400 text-xs">${sale.saleCode}</div>
                        </div>
                    </div>
                `;
                
                recentSalesList.appendChild(saleElement);
            });
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
        function updateTodaySalesStats() {
            const today = new Date().toISOString().split('T')[0];
            const todaySales = sales.filter(sale => {
                const saleDate = new Date(sale.saleDate).toISOString().split('T')[0];
                return saleDate === today;
            });
            
            const todaySalesCount = document.getElementById('todaySalesCount');
            const todaySalesTotal = document.getElementById('todaySalesTotal');
            const todayItemsSold = document.getElementById('todayItemsSold');
            
            if (todaySalesCount) todaySalesCount.textContent = todaySales.length;
            
            const totalAmount = todaySales.reduce((sum, sale) => sum + sale.totalAmount, 0);
            if (todaySalesTotal) todaySalesTotal.textContent = '‡∏ø' + totalAmount.toLocaleString('th-TH', {minimumFractionDigits: 2});
            
            const totalItems = todaySales.reduce((sum, sale) => {
                return sum + (sale.items ? Object.keys(sale.items).length : 0);
            }, 0);
            if (todayItemsSold) todayItemsSold.textContent = totalItems;
        }
        
        // ==================== PRODUCT MANAGEMENT ====================
        
        // ‡πÅ‡∏™‡∏î‡∏á Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        function showProductModal(product = null) {
            const modal = document.getElementById('productModal');
            const modalTitle = document.getElementById('modalProductTitle');
            const productId = document.getElementById('productId');
            const productCode = document.getElementById('productCode');
            const productName = document.getElementById('productName');
            const productCategory = document.getElementById('productCategory');
            const productQuantity = document.getElementById('productQuantity');
            const productPrice = document.getElementById('productPrice');
            
            if (product) {
                modalTitle.textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤';
                productId.value = product.id;
                productCode.value = product.productCode;
                productName.value = product.productName;
                productCategory.value = product.category;
                productQuantity.value = product.quantity;
                productPrice.value = product.price;
            } else {
                modalTitle.textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà';
                productId.value = '';
                productCode.value = '';
                productName.value = '';
                productCategory.value = '';
                productQuantity.value = '';
                productPrice.value = '';
            }
            
            modal.classList.remove('hidden');
        }
        
        // ‡∏ã‡πà‡∏≠‡∏ô Product Modal
        function hideProductModal() {
            document.getElementById('productModal').classList.add('hidden');
        }
        
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        function saveProduct(e) {
            e.preventDefault();
            
            const productId = document.getElementById('productId').value;
            const productCode = document.getElementById('productCode').value.trim();
            const productName = document.getElementById('productName').value.trim();
            const category = document.getElementById('productCategory').value;
            const quantity = parseInt(document.getElementById('productQuantity').value);
            const price = parseFloat(document.getElementById('productPrice').value);
            
            if (!productCode || !productName || !category || isNaN(quantity) || isNaN(price)) {
                showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
                return;
            }
            
            if (quantity < 0) {
                showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', '‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏ö‡πÑ‡∏î‡πâ');
                return;
            }
            
            if (price < 0) {
                showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', '‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡πá‡∏ô‡∏•‡∏ö‡πÑ‡∏î‡πâ');
                return;
            }
            
            const productData = {
                productCode,
                productName,
                category,
                quantity,
                price,
                updatedBy: currentUser.username,
                updatedAt: new Date().toISOString()
            };
            
            if (productId) {
                database.ref('products/' + productId).update(productData)
                    .then(() => {
                        hideProductModal();
                        
                        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                        addNotification('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', `‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${productName} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`, 'success');
                        
                        showAlert('success', '‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                    })
                    .catch(error => {
                        console.error('Error updating product:', error);
                        showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
                    });
            } else {
                const isDuplicate = products.some(product => product.productCode === productCode);
                if (isDuplicate) {
                    showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥', '‡∏£‡∏´‡∏±‡∏™‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ‡∏£‡∏´‡∏±‡∏™‡∏≠‡∏∑‡πà‡∏ô');
                    return;
                }
                
                productData.createdBy = currentUser.username;
                productData.createdAt = new Date().toISOString();
                
                database.ref('products').push(productData)
                    .then(() => {
                        hideProductModal();
                        
                        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                        addNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', `‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${productName} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`, 'success');
                        
                        showAlert('success', '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                    })
                    .catch(error => {
                        console.error('Error adding product:', error);
                        showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
                    });
            }
        }
        
        // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        function editProduct(productId) {
            const product = products.find(p => p.id === productId);
            if (product) {
                showProductModal(product);
            }
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á Confirmation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        function showDeleteProductConfirm(productId, productName) {
            if (!checkPermission('canDelete')) {
                showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤');
                return;
            }
            
            productToDelete = productId;
            
            showConfirmation(
                '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤',
                `‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ "${productName}"? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ`,
                'warning',
                '‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
                '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
            ).then(confirmed => {
                if (confirmed) {
                    deleteProduct();
                } else {
                    productToDelete = null;
                }
            });
        }
        
        // ‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        function deleteProduct() {
            if (!productToDelete || !checkPermission('canDelete')) {
                showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤');
                return;
            }
            
            showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...');
            
            database.ref('products/' + productToDelete).remove()
                .then(() => {
                    hideLoading();
                    
                    // ‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å products array ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö
                    const product = products.find(p => p.id === productToDelete);
                    if (product) {
                        addNotification('‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', `‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ${product.productName} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`, 'info');
                    }
                    
                    showAlert('success', '‡∏•‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                    productToDelete = null;
                })
                .catch(error => {
                    console.error('Error deleting product:', error);
                    hideLoading();
                    showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');
                    productToDelete = null;
                });
        }
        
        // ==================== USER MANAGEMENT ====================
        
        // ‡πÅ‡∏™‡∏î‡∏á Modal ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        function showUserModal(user = null) {
            if (!checkPermission('canManageUsers')) {
                showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ');
                return;
            }
            
            const modal = document.getElementById('userModal');
            const modalTitle = document.getElementById('modalUserTitle');
            const userId = document.getElementById('userId');
            const newUsername = document.getElementById('newUsername');
            const newPassword = document.getElementById('newPassword');
            const fullName = document.getElementById('fullName');
            const userRole = document.getElementById('userRole');
            
            if (user) {
                modalTitle.textContent = '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ';
                userId.value = user.id;
                newUsername.value = user.username;
                newPassword.required = false;
                newPassword.placeholder = '‡πÄ‡∏ß‡πâ‡∏ô‡∏ß‡πà‡∏≤‡∏á‡∏´‡∏≤‡∏Å‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô';
                fullName.value = user.fullName || '';
                userRole.value = user.role || 'user';
            } else {
                modalTitle.textContent = '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà';
                userId.value = '';
                newUsername.value = '';
                newPassword.required = true;
                newPassword.placeholder = '‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô';
                fullName.value = '';
                userRole.value = 'user';
            }
            
            modal.classList.remove('hidden');
        }
        
        // ‡∏ã‡πà‡∏≠‡∏ô User Modal
        function hideUserModal() {
            document.getElementById('userModal').classList.add('hidden');
        }
        
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        function saveUser(e) {
            e.preventDefault();
            
            if (!checkPermission('canManageUsers')) {
                showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ');
                return;
            }
            
            const userId = document.getElementById('userId').value;
            const username = document.getElementById('newUsername').value.trim();
            const password = document.getElementById('newPassword').value;
            const fullName = document.getElementById('fullName').value.trim();
            const role = document.getElementById('userRole').value;
            
            if (!username || !role) {
                showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó');
                return;
            }
            
            if (!userId && !password) {
                showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà');
                return;
            }
            
            const userData = {
                username: username,
                fullName: fullName,
                role: role,
                updatedBy: currentUser.username,
                updatedAt: new Date().toISOString(),
                isActive: true
            };
            
            if (password) {
                userData.password = password;
            }
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ã‡πâ‡∏≥ (‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏Å‡∏£‡∏ì‡∏µ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç)
            const existingUser = users.find(user => user.username === username);
            const isEditing = userId && existingUser && existingUser.id === userId;
            
            // ‡∏ñ‡πâ‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏õ‡πá‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∑‡πà‡∏ô ‡πÉ‡∏´‡πâ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ä‡∏∑‡πà‡∏≠‡∏ã‡πâ‡∏≥
            if ((!userId || !isEditing) && existingUser) {
                showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ã‡πâ‡∏≥', '‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∑‡πà‡∏ô');
                return;
            }
            
            if (userId) {
                // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà
                showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ...');
                
                database.ref('users/' + userId).update(userData)
                    .then(() => {
                        hideUserModal();
                        hideLoading();
                        
                        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                        addNotification('‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', `‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ${username} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`, 'success');
                        
                        showAlert('success', '‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                        
                        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà
                        loadUsers();
                    })
                    .catch(error => {
                        console.error('Error updating user:', error);
                        hideLoading();
                        showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ');
                    });
            } else {
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà
                showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà...');
                
                userData.createdAt = new Date().toISOString();
                userData.createdBy = currentUser.username;
                userData.lastLogin = null;
                
                database.ref('users').push(userData)
                    .then((ref) => {
                        hideUserModal();
                        hideLoading();
                        
                        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
                        addNotification('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', `‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ${username} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`, 'success');
                        
                        showAlert('success', '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                        
                        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà
                        loadUsers();
                    })
                    .catch(error => {
                        console.error('Error adding user:', error);
                        hideLoading();
                        showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ');
                    });
            }
        }
        
        // ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        function editUser(userId) {
            const user = users.find(u => u.id === userId);
            if (user) {
                showUserModal(user);
            } else {
                showAlert('error', '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç');
            }
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á Confirmation ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        function showDeleteUserConfirm(userId, userName) {
            if (!checkPermission('canManageUsers')) {
                showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ç‡∏≠‡∏≠‡∏†‡∏±‡∏¢ ‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ');
                return;
            }
            
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            const userToCheck = users.find(u => u.id === userId);
            if (userToCheck && userToCheck.username === currentUser.username) {
                showAlert('error', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÑ‡∏î‡πâ', '‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡πÑ‡∏î‡πâ');
                return;
            }
            
            userToDelete = userId;
            
            showConfirmation(
                '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ',
                `‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ "${userName}"? ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ`,
                'warning',
                '‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
                '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
            ).then(confirmed => {
                if (confirmed) {
                    deleteUser();
                } else {
                    userToDelete = null;
                }
            });
        }
        
        // ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        function deleteUser() {
            if (!userToDelete || !checkPermission('canManageUsers')) {
                showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ');
                return;
            }
            
            showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ...');
            
            database.ref('users/' + userToDelete).remove()
                .then(() => {
                    hideLoading();
                    
                    // ‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å users array ‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö
                    const user = users.find(u => u.id === userToDelete);
                    if (user) {
                        addNotification('‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', `‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ${user.username} ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`, 'info');
                    }
                    
                    showAlert('success', '‡∏•‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                    userToDelete = null;
                    
                    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà
                    loadUsers();
                })
                .catch(error => {
                    console.error('Error deleting user:', error);
                    hideLoading();
                    showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ');
                    userToDelete = null;
                });
        }
        
        // ==================== SETTINGS FUNCTIONS ====================
        
        // ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏à‡∏≤‡∏Å Local Storage
        function loadSettingsFromLocalStorage() {
            const settings = JSON.parse(localStorage.getItem('inventorySettings')) || {};
            
            const notificationToggle = document.getElementById('notificationToggle');
            const darkModeToggle = document.getElementById('darkModeToggle');
            const autoRefreshToggle = document.getElementById('autoRefreshToggle');
            
            if (notificationToggle) {
                notificationToggle.checked = settings.notifications !== false;
            }
            
            if (darkModeToggle) {
                darkModeToggle.checked = settings.darkMode !== false;
            }
            
            if (autoRefreshToggle) {
                autoRefreshToggle.checked = settings.autoRefresh === true;
                
                if (settings.autoRefresh) {
                    setupAutoRefresh();
                }
            }
        }
        
        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÑ‡∏õ‡∏¢‡∏±‡∏á Local Storage
        function saveSettingsToLocalStorage() {
            const settings = {
                notifications: document.getElementById('notificationToggle').checked,
                darkMode: document.getElementById('darkModeToggle').checked,
                autoRefresh: document.getElementById('autoRefreshToggle').checked
            };
            
            localStorage.setItem('inventorySettings', JSON.stringify(settings));
            showToast('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', 'success');
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô
        function updateSystemTime() {
            const systemTimeElement = document.getElementById('systemTime');
            if (systemTimeElement) {
                const now = new Date();
                systemTimeElement.textContent = now.toLocaleString('th-TH', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
            }
        }
        
        // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
        function updateConnectionStatus() {
            const statusElement = document.getElementById('systemConnectionStatus');
            if (statusElement) {
                statusElement.textContent = '‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå';
                statusElement.className = 'font-medium text-green-400';
            }
        }
        
        // ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Auto Refresh
        function setupAutoRefresh() {
            if (autoRefreshInterval) {
                clearInterval(autoRefreshInterval);
            }
            
            autoRefreshInterval = setInterval(() => {
                loadProducts();
                loadUsers();
                loadSales();
                showToast('‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢', 'info');
            }, 30000);
        }
        
        // ==================== EVENT LISTENERS ====================
        
        // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÅ‡∏≠‡∏û‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
        document.addEventListener('DOMContentLoaded', function() {
            console.log('‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô...');
            checkUserAndPermissions();
            
            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
            setInterval(updateSystemTime, 1000);
            
            // ========== LOGIN PAGE EVENT LISTENERS ==========
            const loginForm = document.getElementById('loginForm');
            if (loginForm) {
                loginForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const username = document.getElementById('username').value.trim();
                    const password = document.getElementById('password').value.trim();
                    
                    if (!username || !password) {
                        showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô');
                        return;
                    }
                    
                    loginUser(username, password);
                });
            }
            
            // ========== NAVIGATION EVENT LISTENERS ==========
            document.getElementById('navDashboard')?.addEventListener('click', () => showPage('dashboardPage'));
            document.getElementById('navProducts')?.addEventListener('click', () => showPage('productsPage'));
            document.getElementById('navSales')?.addEventListener('click', () => {
                if (checkPermission('canSell')) {
                    showPage('salesPage');
                } else {
                    showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ');
                }
            });
            document.getElementById('navSalesReport')?.addEventListener('click', () => {
                if (checkPermission('canViewSales')) {
                    showPage('salesReportPage');
                } else {
                    showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢');
                }
            });
            document.getElementById('navUsers')?.addEventListener('click', () => {
                if (checkPermission('canManageUsers')) {
                    showPage('usersPage');
                } else {
                    showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ');
                }
            });
            document.getElementById('navSettings')?.addEventListener('click', () => {
                if (checkPermission('canManageSettings')) {
                    showPage('settingsPage');
                } else {
                    showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö');
                }
            });
            
            document.getElementById('homeBtn')?.addEventListener('click', (e) => {
                e.preventDefault();
                showPage('dashboardPage');
            });
            
            document.getElementById('userInfoBtn')?.addEventListener('click', showUserProfile);
            
            // ========== NOTIFICATION EVENT LISTENERS ==========
            document.getElementById('notificationBtn')?.addEventListener('click', function() {
                notificationPanel.classList.toggle('hidden');
                if (!notificationPanel.classList.contains('hidden')) {
                    // ‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏ß‡πà‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î panel
                    notifications.forEach(n => n.read = true);
                    updateNotificationBadge();
                    updateNotificationPanel();
                }
            });
            
            document.getElementById('clearNotificationsBtn')?.addEventListener('click', clearAllNotifications);
            
            // ‡∏õ‡∏¥‡∏î notification panel ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ô‡∏≠‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà
            document.addEventListener('click', function(event) {
                const notificationBtn = document.getElementById('notificationBtn');
                const notificationPanel = document.getElementById('notificationPanel');
                
                if (notificationBtn && notificationPanel && 
                    !notificationBtn.contains(event.target) && 
                    !notificationPanel.contains(event.target) && 
                    !notificationPanel.classList.contains('hidden')) {
                    notificationPanel.classList.add('hidden');
                }
            });
            
            // ========== DASHBOARD PAGE EVENT LISTENERS ==========
            document.getElementById('quickSaleBtn')?.addEventListener('click', () => {
                if (checkPermission('canSell')) {
                    showPage('salesPage');
                } else {
                    showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤');
                }
            });
            
            document.getElementById('quickAddProductBtn')?.addEventListener('click', () => {
                if (checkPermission('canAdd')) {
                    showProductModal();
                } else {
                    showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤');
                }
            });
            
            // ========== PRODUCTS PAGE EVENT LISTENERS ==========
            document.getElementById('addProductMainBtn')?.addEventListener('click', () => {
                if (checkPermission('canAdd')) {
                    showProductModal();
                } else {
                    showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤');
                }
            });
            
            document.getElementById('productForm')?.addEventListener('submit', saveProduct);
            document.getElementById('cancelProductModalBtn')?.addEventListener('click', hideProductModal);
            document.getElementById('exportProductsBtn')?.addEventListener('click', exportProducts);
            document.getElementById('refreshProductsBtn')?.addEventListener('click', () => {
                loadProducts();
                showToast('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...', 'info');
            });
            
            // ========== SALES PAGE EVENT LISTENERS ==========
            document.getElementById('newSaleBtn')?.addEventListener('click', resetCart);
            document.getElementById('refreshSalesProductsBtn')?.addEventListener('click', () => {
                loadProducts();
                loadSalesProducts();
                showToast('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤...', 'info');
            });
            
            document.getElementById('qrPaymentBtn')?.addEventListener('click', showQRCodePayment);
            document.getElementById('clearCartBtn')?.addEventListener('click', resetCart);
            document.getElementById('completeSaleBtn')?.addEventListener('click', completeSale);
            
            document.getElementById('addQuickProductBtn')?.addEventListener('click', () => {
                document.getElementById('quickProductModal').classList.remove('hidden');
            });
            
            document.getElementById('viewLowStockBtn')?.addEventListener('click', () => {
                // ‡∏Å‡∏£‡∏≠‡∏á‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢
                const lowStockProducts = products.filter(p => p.quantity > 0 && p.quantity <= 5);
                
                if (lowStockProducts.length === 0) {
                    showAlert('info', '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö');
                    return;
                }
                
                let message = '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢:\n';
                lowStockProducts.forEach(product => {
                    message += `- ${product.productName} (${product.productCode}): ${product.quantity} ‡∏ä‡∏¥‡πâ‡∏ô\n`;
                });
                
                showAlert('warning', '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ô‡πâ‡∏≠‡∏¢', message);
            });
            
            // ‡πÄ‡∏°‡∏∑‡πà‡∏≠ discount ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°
            document.getElementById('discountAmount')?.addEventListener('input', updateCartDisplay);
            
            // ========== SALES REPORT PAGE EVENT LISTENERS ==========
            document.getElementById('generateReportBtn')?.addEventListener('click', generateSalesReport);
            document.getElementById('exportSalesReportBtn')?.addEventListener('click', exportSalesReport);
            document.getElementById('printSalesReportBtn')?.addEventListener('click', printSalesReport);
            
            // ========== USERS PAGE EVENT LISTENERS ==========
            document.getElementById('addUserBtn')?.addEventListener('click', () => {
                if (checkPermission('canManageUsers')) {
                    showUserModal();
                } else {
                    showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ');
                }
            });
            
            document.getElementById('refreshUsersBtn')?.addEventListener('click', () => {
                loadUsers();
                showToast('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ...', 'info');
            });
            
            document.getElementById('userForm')?.addEventListener('submit', saveUser);
            document.getElementById('cancelUserModalBtn')?.addEventListener('click', hideUserModal);
            
            // ========== SETTINGS PAGE EVENT LISTENERS ==========
            document.getElementById('backupDataBtn')?.addEventListener('click', backupData);
            
            document.getElementById('resetDemoDataBtn')?.addEventListener('click', () => {
                if (checkPermission('canManageSettings')) {
                    showConfirmation(
                        '‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á',
                        '‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà\n‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡πà‡∏≠?',
                        'warning',
                        '‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
                        '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
                    ).then(confirmed => {
                        if (confirmed) {
                            const demoProducts = [
                                {
                                    productCode: "P001",
                                    productName: "‡πÄ‡∏°‡∏≤‡∏™‡πå‡πÑ‡∏£‡πâ‡∏™‡∏≤‡∏¢",
                                    category: "‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå",
                                    quantity: 25,
                                    price: 599.00,
                                    createdBy: currentUser.username,
                                    createdAt: new Date().toISOString()
                                },
                                {
                                    productCode: "P002",
                                    productName: "‡∏Ñ‡∏µ‡∏¢‡πå‡∏ö‡∏≠‡∏£‡πå‡∏î‡πÄ‡∏Å‡∏°‡∏°‡∏¥‡πà‡∏á",
                                    category: "‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå",
                                    quantity: 12,
                                    price: 1290.00,
                                    createdBy: currentUser.username,
                                    createdAt: new Date().toISOString()
                                },
                                {
                                    productCode: "P003",
                                    productName: "‡∏™‡∏°‡∏∏‡∏î‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å",
                                    category: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô",
                                    quantity: 150,
                                    price: 45.00,
                                    createdBy: currentUser.username,
                                    createdAt: new Date().toISOString()
                                },
                                {
                                    productCode: "P004",
                                    productName: "‡∏ô‡πâ‡∏≥‡∏î‡∏∑‡πà‡∏°",
                                    category: "‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°",
                                    quantity: 100,
                                    price: 10.00,
                                    createdBy: currentUser.username,
                                    createdAt: new Date().toISOString()
                                },
                                {
                                    productCode: "P005",
                                    productName: "‡∏Ç‡∏ô‡∏°‡∏Ç‡∏ö‡πÄ‡∏Ñ‡∏µ‡πâ‡∏¢‡∏ß",
                                    category: "‡∏≠‡∏≤‡∏´‡∏≤‡∏£",
                                    quantity: 50,
                                    price: 20.00,
                                    createdBy: currentUser.username,
                                    createdAt: new Date().toISOString()
                                }
                            ];
                            
                            showLoading('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á...');
                            
                            database.ref('products').remove()
                                .then(() => {
                                    const promises = demoProducts.map(product => {
                                        return database.ref('products').push(product);
                                    });
                                    
                                    return Promise.all(promises);
                                })
                                .then(() => {
                                    hideLoading();
                                    showAlert('success', '‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!');
                                })
                                .catch(error => {
                                    console.error('Error resetting demo data:', error);
                                    hideLoading();
                                    showAlert('error', '‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á');
                                });
                        }
                    });
                } else {
                    showAlert('error', '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á');
                }
            });
            
            // Settings Toggles
            document.getElementById('notificationToggle')?.addEventListener('change', function() {
                showToast(this.checked ? '‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß' : '‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß', 'info');
                saveSettingsToLocalStorage();
            });
            
            document.getElementById('darkModeToggle')?.addEventListener('change', function() {
                showToast(this.checked ? '‡πÄ‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î‡πÅ‡∏•‡πâ‡∏ß' : '‡∏õ‡∏¥‡∏î‡πÇ‡∏´‡∏°‡∏î‡∏°‡∏∑‡∏î‡πÅ‡∏•‡πâ‡∏ß', 'info');
                saveSettingsToLocalStorage();
            });
            
            document.getElementById('autoRefreshToggle')?.addEventListener('change', function() {
                if (this.checked) {
                    setupAutoRefresh();
                    showToast('‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß', 'info');
                } else {
                    if (autoRefreshInterval) {
                        clearInterval(autoRefreshInterval);
                        autoRefreshInterval = null;
                    }
                    showToast('‡∏õ‡∏¥‡∏î‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß', 'info');
                }
                saveSettingsToLocalStorage();
            });
            
            // ========== QR PAYMENT EVENT LISTENERS ==========
            document.getElementById('cancelQrPaymentBtn')?.addEventListener('click', cancelQRPayment);
            document.getElementById('confirmQrPaymentBtn')?.addEventListener('click', confirmQRPayment);
            
            // ========== RECEIPT EVENT LISTENERS ==========
            document.getElementById('closeReceiptBtn')?.addEventListener('click', () => {
                document.getElementById('receiptModal').classList.add('hidden');
            });
            
            document.getElementById('printReceiptBtn')?.addEventListener('click', () => {
                printReceipt();
            });
            
            // ========== GENERAL EVENT LISTENERS ==========
            document.getElementById('logoutBtn')?.addEventListener('click', logout);
            document.getElementById('closeProfileBtn')?.addEventListener('click', () => {
                document.getElementById('userProfileModal').classList.add('hidden');
            });
            
            document.getElementById('quickHelpBtn')?.addEventListener('click', () => {
                showAlert('info', '‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö', 
                    'üõí **‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤:**\n' +
                    '- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢\n' +
                    '- ‡∏õ‡∏£‡∏±‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤\n' +
                    '- ‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô\n' +
                    '- ‡∏Å‡∏î "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏î‡∏™‡∏ï‡πä‡∏≠‡∏Å\n\n' +
                    'üìä **‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢:**\n' +
                    '- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô\n' +
                    '- ‡∏Å‡∏£‡∏≠‡∏á‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤\n' +
                    '- ‡∏î‡∏π‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏¢‡∏î‡∏µ\n' +
                    '- ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å‡∏´‡∏£‡∏∑‡∏≠‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô\n\n' +
                    'üì¶ **‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:**\n' +
                    '- Admin: ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô\n' +
                    '- Manager: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ\n' +
                    '- User: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ ‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ'
                );
            });
            
            // ‡∏õ‡∏¥‡∏î Modal ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏•‡∏¥‡∏Å‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
            const modals = ['productModal', 'userModal', 'receiptModal', 'quickProductModal', 'qrPaymentModal', 'userProfileModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (modal) {
                    modal.addEventListener('click', function(e) {
                        if (e.target === this) {
                            if (modalId === 'qrPaymentModal') {
                                cancelQRPayment();
                            } else {
                                this.classList.add('hidden');
                            }
                        }
                    });
                }
            });
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö
            console.log('‡∏£‡∏∞‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!');
            console.log('‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô');
            console.log('‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡∏∞ QR Code Payment ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô');
            console.log('‡∏£‡∏∞‡∏ö‡∏ö‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£ inspect ‡πÅ‡∏•‡∏∞ console ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô');
            console.log('‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ó‡∏î‡∏™‡∏≠‡∏ö:');
            console.log('- ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ: user / user123');
            console.log('- ‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£: manager / manager123');
            console.log('- ‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö: admin / admin123');
        });
        
        // ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å onclick ‡πÉ‡∏ô HTML ‡πÑ‡∏î‡πâ
        window.editProduct = editProduct;
        window.showDeleteProductConfirm = showDeleteProductConfirm;
        window.editUser = editUser;
        window.showDeleteUserConfirm = showDeleteUserConfirm;
        window.addToCart = addToCart;
        window.increaseQuantity = increaseQuantity;
        window.decreaseQuantity = decreaseQuantity;
        window.removeFromCart = removeFromCart;
        window.closeAlert = closeAlert;
        window.viewReceipt = viewReceipt;
        
        // ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
        function logout() {
            showConfirmation(
                '‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö',
                '‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏ô‡πà‡πÉ‡∏à‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö?',
                'question',
                '‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö',
                '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
            ).then(confirmed => {
                if (confirmed) {
                    if (autoRefreshInterval) {
                        clearInterval(autoRefreshInterval);
                    }
                    
                    if (qrPaymentTimer) {
                        clearInterval(qrPaymentTimer);
                    }
                    
                    localStorage.removeItem('inventoryUser');
                    currentUser = null;
                    products = [];
                    users = [];
                    sales = [];
                    cart = [];
                    notifications = [];
                    showLogin();
                    showAlert('success', '‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à', '‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß');
                }
            });
        }
        
        // ‡πÅ‡∏™‡∏î‡∏á‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
        function showUserProfile() {
            if (!currentUser) return;
            
            const modal = document.getElementById('userProfileModal');
            const profileUsername = document.getElementById('profileUsername');
            const profileRoleBadge = document.getElementById('profileRoleBadge');
            const profileFullName = document.getElementById('profileFullName');
            const profileRole = document.getElementById('profileRole');
            const profileEmail = document.getElementById('profileEmail');
            const profileLastLogin = document.getElementById('profileLastLogin');
            const profileCreatedAt = document.getElementById('profileCreatedAt');
            
            // ‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å users array
            const userData = users.find(u => u.id === currentUser.id);
            
            if (userData) {
                profileUsername.textContent = userData.username;
                profileFullName.textContent = userData.fullName || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
                profileRole.textContent = getRoleDisplay(userData.role);
                profileEmail.textContent = userData.email || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
                profileLastLogin.textContent = userData.lastLogin ? 
                    new Date(userData.lastLogin).toLocaleString('th-TH') : '‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô';
                profileCreatedAt.textContent = userData.createdAt ? 
                    new Date(userData.createdAt).toLocaleDateString('th-TH') : '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
                
                let badgeClass = '';
                let roleDisplay = '';
                
                switch(userData.role) {
                    case 'admin':
                        badgeClass = 'role-admin';
                        roleDisplay = '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';
                        break;
                    case 'manager':
                        badgeClass = 'role-manager';
                        roleDisplay = '‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£';
                        break;
                    case 'user':
                        badgeClass = 'role-user';
                        roleDisplay = '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
                        break;
                }
                
                profileRoleBadge.innerHTML = `<span class="role-badge ${badgeClass}">${roleDisplay}</span>`;
            } else {
                // ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏ö‡πÉ‡∏ô array ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å currentUser
                profileUsername.textContent = currentUser.username;
                profileFullName.textContent = currentUser.fullName || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
                profileRole.textContent = getRoleDisplay(currentUser.role);
                profileEmail.textContent = '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
                profileLastLogin.textContent = '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
                profileCreatedAt.textContent = '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
                
                let badgeClass = '';
                let roleDisplay = '';
                
                switch(currentUser.role) {
                    case 'admin':
                        badgeClass = 'role-admin';
                        roleDisplay = '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';
                        break;
                    case 'manager':
                        badgeClass = 'role-manager';
                        roleDisplay = '‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£';
                        break;
                    case 'user':
                        badgeClass = 'role-user';
                        roleDisplay = '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
                        break;
                }
                
                profileRoleBadge.innerHTML = `<span class="role-badge ${badgeClass}">${roleDisplay}</span>`;
            }
            
            modal.classList.remove('hidden');
        }
        
        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó
        function getRoleDisplay(role) {
            switch(role) {
                case 'admin': return '‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö';
                case 'manager': return '‡∏ú‡∏π‡πâ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£';
                case 'user': return '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ';
                default: return '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
            }
        }
        
        // ‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
        function printReceipt() {
            const receiptContent = document.getElementById('receiptContent');
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏û‡∏¥‡∏°‡∏û‡πå
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <!DOCTYPE html>
                <html>
                <head>
                    <title>‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</title>
                    <style>
                        body {
                            font-family: 'Courier New', monospace;
                            margin: 0;
                            padding: 20px;
                            color: #000;
                        }
                        .receipt {
                            width: 80mm;
                            margin: 0 auto;
                        }
                        .header {
                            text-align: center;
                            margin-bottom: 20px;
                        }
                        .header h2 {
                            margin: 0;
                            font-size: 18px;
                        }
                        .header p {
                            margin: 5px 0;
                            font-size: 12px;
                        }
                        .info {
                            margin-bottom: 15px;
                        }
                        .info div {
                            display: flex;
                            justify-content: space-between;
                            margin-bottom: 5px;
                        }
                        .items {
                            margin: 15px 0;
                        }
                        .items-header {
                            display: flex;
                            justify-content: space-between;
                            font-weight: bold;
                            border-bottom: 1px dashed #000;
                            padding-bottom: 5px;
                            margin-bottom: 10px;
                        }
                        .item {
                            display: flex;
                            justify-content: space-between;
                            margin-bottom: 5px;
                            font-size: 14px;
                        }
                        .item-name {
                            flex: 2;
                        }
                        .item-qty, .item-price {
                            flex: 1;
                            text-align: right;
                        }
                        .summary {
                            border-top: 1px dashed #000;
                            padding-top: 10px;
                            margin-top: 15px;
                        }
                        .summary div {
                            display: flex;
                            justify-content: space-between;
                            margin-bottom: 5px;
                        }
                        .total {
                            font-weight: bold;
                            font-size: 16px;
                        }
                        .footer {
                            text-align: center;
                            margin-top: 20px;
                            padding-top: 10px;
                            border-top: 1px dashed #000;
                            font-size: 12px;
                        }
                        @media print {
                            body {
                                width: 80mm;
                            }
                        }
                    </style>
                </head>
                <body>
                    <div class="receipt">
                        ${receiptContent.innerHTML}
                    </div>
                    <script>
                        window.onload = function() {
                            window.print();
                            setTimeout(function() {
                                window.close();
                            }, 500);
                        };
                    <\/script>
                </body>
                </html>
            `);
            printWindow.document.close();
        }
    </script>
</body>
</html>
